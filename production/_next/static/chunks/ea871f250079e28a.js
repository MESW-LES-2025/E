(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,t=>{"use strict";var a=t.i(43476),e=t.i(47163);function o({className:t,...o}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,e.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...o})}function i({className:t,...o}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,e.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...o})}function n({className:t,...o}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,e.cn)("leading-none font-semibold",t),...o})}function r({className:t,...o}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,e.cn)("text-muted-foreground text-sm",t),...o})}function s({className:t,...o}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,e.cn)("px-6",t),...o})}function l({className:t,...o}){return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,e.cn)("flex items-center px-6 [.border-t]:pt-6",t),...o})}t.s(["Card",()=>o,"CardContent",()=>s,"CardDescription",()=>r,"CardFooter",()=>l,"CardHeader",()=>i,"CardTitle",()=>n])},18109,t=>{"use strict";var a=t.i(38036);let e="https://APimenta4prod.pythonanywhere.com/api";async function o(){let t;try{t=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/`,{method:"GET"}),(401===t.status||403===t.status)&&(t=await fetch(`${e}/accounts/organizations/`))}catch{t=await fetch(`${e}/accounts/organizations/`)}if(!t.ok){let a=await t.json().catch(()=>({}));throw Error(a?.detail||"Failed to fetch organizations")}let o=await t.json();return Array.isArray(o)?o:o.results||[]}async function i(t){let o=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/${t}/`,{method:"GET"});if(!o.ok){let t=await o.json().catch(()=>({}));throw Error(t?.detail||"Failed to fetch organization")}return o.json()}async function n(t){let o=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/`,{method:"POST",body:JSON.stringify(t)});if(!o.ok){let t=await o.json().catch(()=>({}));if(403===o.status)throw Error(t?.detail||"You don't have permission to create organizations. Only users with ORGANIZER role can create organizations.");if(400===o.status&&t)throw t;throw Error(t?.detail||"Failed to create organization")}return o.json()}async function r(t,o){let i=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/${t}/`,{method:"PATCH",body:JSON.stringify(o)});if(!i.ok){let t=await i.json().catch(()=>({}));throw Error(t?.detail||"Failed to update organization")}return i.json()}async function s(t){let o=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/${t}/`,{method:"DELETE"});if(!o.ok){let t=await o.json().catch(()=>({}));throw Error(t?.detail||"Failed to delete organization")}}async function l(t){let o;try{o=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/${t}/events/`,{method:"GET"}),(401===o.status||403===o.status)&&(o=await fetch(`${e}/accounts/organizations/${t}/events/`))}catch{o=await fetch(`${e}/accounts/organizations/${t}/events/`)}if(!o.ok){let t=await o.json().catch(()=>({}));throw Error(t?.detail||"Failed to fetch organization events")}return o.json()}async function c(){let t=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/me/`,{method:"GET"});if(!t.ok){let a=await t.json().catch(()=>({}));throw Error(a?.detail||"Failed to fetch my organizations")}return t.json()}async function d(t){if(t.length<2)return[];let o=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/search_users/?q=${encodeURIComponent(t)}`,{method:"GET"});if(!o.ok){let t=await o.json().catch(()=>({}));throw Error(t?.detail||"Failed to search users")}return o.json()}async function h(t){let o=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/${t}/collaborators/`,{method:"GET"});if(!o.ok){let t=await o.json().catch(()=>({}));throw Error(t?.detail||"Failed to fetch collaborators")}return o.json()}async function u(t,o){let i=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/${t}/collaborators/${o}/`,{method:"POST"});if(!i.ok){let t=await i.json().catch(()=>({}));throw Error(t?.detail||"Failed to add collaborator")}}async function f(t,o){let i=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/${t}/collaborators/${o}/`,{method:"DELETE"});if(!i.ok){let t=await i.json().catch(()=>({}));throw Error(t?.detail||"Failed to remove collaborator")}}async function g(t){let o=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/${t}/follow/`,{method:"POST"});if(!o.ok){let t=await o.json().catch(()=>({}));throw Error(t?.detail||"Failed to follow organization")}}async function m(t){let o=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/${t}/follow/`,{method:"DELETE"});if(!o.ok){let t=await o.json().catch(()=>({}));throw Error(t?.detail||"Failed to unfollow organization")}}async function w(){let t=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/followed/`,{method:"GET"});if(!t.ok){let a=await t.json().catch(()=>({}));throw Error(a?.detail||"Failed to fetch followed organizations")}return t.json()}t.s(["addCollaborator",()=>u,"createOrganization",()=>n,"deleteOrganization",()=>s,"followOrganization",()=>g,"getCollaborators",()=>h,"getFollowedOrganizations",()=>w,"getMyOrganizations",()=>c,"getOrganization",()=>i,"getOrganizationEvents",()=>l,"listOrganizations",()=>o,"removeCollaborator",()=>f,"searchUsers",()=>d,"unfollowOrganization",()=>m,"updateOrganization",()=>r])},41670,t=>{"use strict";var a=t.i(43476),e=t.i(71645),o=t.i(22016),i=t.i(18566),n=t.i(18109),r=t.i(38036),s=t.i(79879),l=t.i(67881),c=t.i(70065);function d({organization:t,referrer:d}){var h;let u=(0,i.useRouter)(),[f,g]=(0,e.useState)(t.is_following||!1),[m,w]=(0,e.useState)(!1),[x,j]=(0,e.useState)(null);(0,e.useEffect)(()=>{(0,r.isAuthenticated)()&&(0,s.getProfile)().then(t=>{t&&j(t.role)}).catch(()=>{})},[]),(0,e.useEffect)(()=>{g(t.is_following||!1)},[t.id,t.is_following]);let p=async a=>{if(a.preventDefault(),a.stopPropagation(),!(0,r.isAuthenticated)()){sessionStorage.setItem("login_redirect",window.location.pathname),u.push("/profile/login");return}try{w(!0),f?(await (0,n.unfollowOrganization)(t.id),g(!1)):(await (0,n.followOrganization)(t.id),g(!0))}catch(t){console.error("Failed to toggle follow:",t),alert(t instanceof Error?t.message:"Failed to update follow status. Please try again.")}finally{w(!1)}};return(0,a.jsxs)(c.Card,{className:"hover:shadow-lg transition-shadow flex flex-col",children:[(0,a.jsxs)(c.CardHeader,{children:[(0,a.jsx)(c.CardTitle,{className:"line-clamp-2",children:t.name}),(0,a.jsxs)(c.CardDescription,{children:[(h=t.organization_type)?({COMPANY:"Company",NON_PROFIT:"Non-profit",COMMUNITY:"Community",EDUCATIONAL:"Educational",GOVERNMENT:"Government",OTHER:"Other"})[h]||h:"Not specified",t.event_count>0&&(0,a.jsxs)("span",{className:"ml-2",children:["â€¢ ",t.event_count," event",1!==t.event_count?"s":""]})]})]}),(0,a.jsxs)(c.CardContent,{className:"flex-1",children:[t.description&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-3 mb-2",children:t.description}),t.city&&t.country&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["ðŸ“ ",t.city,", ",t.country]}),t.owner_name&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["By ",t.owner_name]})]}),(0,a.jsxs)(c.CardFooter,{className:"flex flex-col gap-2",children:[(0,a.jsx)(l.Button,{variant:"outline",className:"w-full",asChild:!0,children:(0,a.jsx)(o.default,{href:`/organizations/detail?id=${t.id}`,onClick:()=>{d&&sessionStorage.setItem("org_detail_referrer",d)},children:"View Details"})}),"ATTENDEE"===x&&(0,a.jsxs)(l.Button,{variant:f?"outline":"default",size:"sm",onClick:p,disabled:m,className:"w-full group relative",children:[(0,a.jsx)("span",{className:f?"group-hover:hidden":"",children:m?"Loading...":f?"Following":"Follow"}),f&&!m&&(0,a.jsx)("span",{className:"hidden group-hover:inline",children:"Unfollow"})]})]})]})}t.s(["default",()=>d])},76922,t=>{"use strict";var a=t.i(43476),e=t.i(71645),o=t.i(22016),i=t.i(18109),n=t.i(38036),r=t.i(79879),s=t.i(67881),l=t.i(70065),c=t.i(41670);function d(){let[t,d]=(0,e.useState)([]),[h,u]=(0,e.useState)(null),[f,g]=(0,e.useState)(!0),[m,w]=(0,e.useState)(null),[x,j]=(0,e.useState)(!1),[p,z]=(0,e.useState)(!1);if((0,e.useEffect)(()=>{j(!0),z((0,n.isAuthenticated)())},[]),(0,e.useEffect)(()=>{x&&(async()=>{try{g(!0),w(null);let t=await (0,i.listOrganizations)();if(d(t),p)try{let t=await (0,r.getProfile)();u(t)}catch(t){console.error("Failed to load profile:",t)}}catch(t){w(t instanceof Error?t.message:"Failed to load organizations")}finally{g(!1)}})()},[x,p]),!x||f)return(0,a.jsx)("div",{className:"container mx-auto p-8 max-w-7xl",children:(0,a.jsx)("p",{children:"Loading organizations..."})});if(m)return(0,a.jsx)("div",{className:"container mx-auto p-8 max-w-7xl",children:(0,a.jsx)(l.Card,{children:(0,a.jsxs)(l.CardHeader,{children:[(0,a.jsx)(l.CardTitle,{children:"Error"}),(0,a.jsx)(l.CardDescription,{children:m})]})})});let E=h?.role==="ORGANIZER";return(0,a.jsxs)("div",{className:"container mx-auto p-8 max-w-7xl",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Organizations"}),E&&t.length>0&&(0,a.jsx)(s.Button,{asChild:!0,children:(0,a.jsx)(o.default,{href:"/organizations/create",children:"Create Organization"})})]}),0===t.length?(0,a.jsx)(l.Card,{children:(0,a.jsxs)(l.CardContent,{className:"py-12 text-center",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:E?"No organizations have been created yet. Create the first one to get started!":"No organizations are available at the moment. Check back later!"}),E&&(0,a.jsx)(s.Button,{asChild:!0,className:"mt-4",children:(0,a.jsx)(o.default,{href:"/organizations/create",children:"Create Organization"})})]})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(t=>(0,a.jsx)(c.default,{organization:t,referrer:"/organizations"},t.id))})]})}t.s(["default",()=>d])}]);