(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,t=>{"use strict";var a=t.i(43476),e=t.i(47163);function o({className:t,...o}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,e.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...o})}function i({className:t,...o}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,e.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...o})}function n({className:t,...o}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,e.cn)("leading-none font-semibold",t),...o})}function r({className:t,...o}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,e.cn)("text-muted-foreground text-sm",t),...o})}function s({className:t,...o}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,e.cn)("px-6",t),...o})}function c({className:t,...o}){return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,e.cn)("flex items-center px-6 [.border-t]:pt-6",t),...o})}t.s(["Card",()=>o,"CardContent",()=>s,"CardDescription",()=>r,"CardFooter",()=>c,"CardHeader",()=>i,"CardTitle",()=>n])},18109,t=>{"use strict";var a=t.i(38036);let e="https://APimenta4prod.pythonanywhere.com/api";async function o(){let t;try{t=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/`,{method:"GET"}),(401===t.status||403===t.status)&&(t=await fetch(`${e}/accounts/organizations/`))}catch{t=await fetch(`${e}/accounts/organizations/`)}if(!t.ok){let a=await t.json().catch(()=>({}));throw Error(a?.detail||"Failed to fetch organizations")}let o=await t.json();return Array.isArray(o)?o:o.results||[]}async function i(t){let o=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/${t}/`,{method:"GET"});if(!o.ok){let t=await o.json().catch(()=>({}));throw Error(t?.detail||"Failed to fetch organization")}return o.json()}async function n(t){let o=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/`,{method:"POST",body:JSON.stringify(t)});if(!o.ok){let t=await o.json().catch(()=>({}));if(403===o.status)throw Error(t?.detail||"You don't have permission to create organizations. Only users with ORGANIZER role can create organizations.");if(400===o.status&&t)throw t;throw Error(t?.detail||"Failed to create organization")}return o.json()}async function r(t,o){let i=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/${t}/`,{method:"PATCH",body:JSON.stringify(o)});if(!i.ok){let t=await i.json().catch(()=>({}));throw Error(t?.detail||"Failed to update organization")}return i.json()}async function s(t){let o=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/${t}/`,{method:"DELETE"});if(!o.ok){let t=await o.json().catch(()=>({}));throw Error(t?.detail||"Failed to delete organization")}}async function c(t){let o;try{o=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/${t}/events/`,{method:"GET"}),(401===o.status||403===o.status)&&(o=await fetch(`${e}/accounts/organizations/${t}/events/`))}catch{o=await fetch(`${e}/accounts/organizations/${t}/events/`)}if(!o.ok){let t=await o.json().catch(()=>({}));throw Error(t?.detail||"Failed to fetch organization events")}return o.json()}async function l(){let t=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/me/`,{method:"GET"});if(!t.ok){let a=await t.json().catch(()=>({}));throw Error(a?.detail||"Failed to fetch my organizations")}return t.json()}async function d(t){if(t.length<2)return[];let o=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/search_users/?q=${encodeURIComponent(t)}`,{method:"GET"});if(!o.ok){let t=await o.json().catch(()=>({}));throw Error(t?.detail||"Failed to search users")}return o.json()}async function h(t){let o=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/${t}/collaborators/`,{method:"GET"});if(!o.ok){let t=await o.json().catch(()=>({}));throw Error(t?.detail||"Failed to fetch collaborators")}return o.json()}async function u(t,o){let i=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/${t}/collaborators/${o}/`,{method:"POST"});if(!i.ok){let t=await i.json().catch(()=>({}));throw Error(t?.detail||"Failed to add collaborator")}}async function f(t,o){let i=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/${t}/collaborators/${o}/`,{method:"DELETE"});if(!i.ok){let t=await i.json().catch(()=>({}));throw Error(t?.detail||"Failed to remove collaborator")}}async function g(t){let o=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/${t}/follow/`,{method:"POST"});if(!o.ok){let t=await o.json().catch(()=>({}));throw Error(t?.detail||"Failed to follow organization")}}async function x(t){let o=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/${t}/follow/`,{method:"DELETE"});if(!o.ok){let t=await o.json().catch(()=>({}));throw Error(t?.detail||"Failed to unfollow organization")}}async function m(){let t=await (0,a.fetchWithAuth)(`${e}/accounts/organizations/followed/`,{method:"GET"});if(!t.ok){let a=await t.json().catch(()=>({}));throw Error(a?.detail||"Failed to fetch followed organizations")}return t.json()}t.s(["addCollaborator",()=>u,"createOrganization",()=>n,"deleteOrganization",()=>s,"followOrganization",()=>g,"getCollaborators",()=>h,"getFollowedOrganizations",()=>m,"getMyOrganizations",()=>l,"getOrganization",()=>i,"getOrganizationEvents",()=>c,"listOrganizations",()=>o,"removeCollaborator",()=>f,"searchUsers",()=>d,"unfollowOrganization",()=>x,"updateOrganization",()=>r])},15422,t=>{"use strict";var a=t.i(43476),e=t.i(71645),o=t.i(18566),i=t.i(22016),n=t.i(38036),r=t.i(79879),s=t.i(18109),c=t.i(67881),l=t.i(70065);function d(){let t=(0,o.useRouter)(),[d,h]=(0,e.useState)(!1),[u,f]=(0,e.useState)(!1),[g,x]=(0,e.useState)(null),[m,j]=(0,e.useState)([]),[w,z]=(0,e.useState)([]),[p,y]=(0,e.useState)(!0),[C,E]=(0,e.useState)(null);if((0,e.useEffect)(()=>{h(!0);let a=(0,n.isAuthenticated)();(f(a),a)?(async()=>{try{y(!0),E(null);let a=await (0,r.getProfile)();if(x(a),"ORGANIZER"!==a.role)return void t.replace("/organizations");let e=await (0,s.getMyOrganizations)();j(e.owned||[]),z(e.collaborated||[])}catch(t){E(t instanceof Error?t.message:"Failed to load organizations")}finally{y(!1)}})():t.replace("/profile/login")},[t]),!d||!u||p)return(0,a.jsx)("div",{className:"container mx-auto p-8 max-w-7xl",children:(0,a.jsx)("p",{children:"Loading..."})});if(C)return(0,a.jsx)("div",{className:"container mx-auto p-8 max-w-7xl",children:(0,a.jsxs)(l.Card,{children:[(0,a.jsxs)(l.CardHeader,{children:[(0,a.jsx)(l.CardTitle,{children:"Error"}),(0,a.jsx)(l.CardDescription,{children:C})]}),(0,a.jsx)(l.CardFooter,{children:(0,a.jsx)(c.Button,{variant:"outline",onClick:()=>t.push("/organizations"),children:"Back to Organizations"})})]})});if(g?.role!=="ORGANIZER")return(0,a.jsx)("div",{className:"container mx-auto p-8 max-w-7xl",children:(0,a.jsxs)(l.Card,{children:[(0,a.jsxs)(l.CardHeader,{children:[(0,a.jsx)(l.CardTitle,{children:"Access Denied"}),(0,a.jsx)(l.CardDescription,{children:"Only users with ORGANIZER role can access this page."})]}),(0,a.jsx)(l.CardFooter,{children:(0,a.jsx)(c.Button,{variant:"outline",onClick:()=>t.push("/organizations"),children:"Browse Organizations"})})]})});let v=(t,e)=>(0,a.jsxs)(l.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,a.jsxs)(l.CardHeader,{children:[(0,a.jsx)(l.CardTitle,{className:"line-clamp-2",children:t.name}),(0,a.jsxs)(l.CardDescription,{children:[t.event_count>0&&(0,a.jsxs)("span",{children:[t.event_count," event",1!==t.event_count?"s":""]}),!e&&(0,a.jsx)("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Collaborator"})]})]}),(0,a.jsxs)(l.CardContent,{children:[t.description&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-3 mb-2",children:t.description}),t.city&&t.country&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["ðŸ“ ",t.city,", ",t.country]})]}),(0,a.jsxs)(l.CardFooter,{className:"flex gap-2",children:[(0,a.jsx)(c.Button,{variant:"outline",className:"flex-1",asChild:!0,children:(0,a.jsx)(i.default,{href:`/organizations/detail?id=${t.id}`,onClick:()=>sessionStorage.setItem("org_detail_referrer","/organizations/my"),children:"View"})}),e&&(0,a.jsx)(c.Button,{variant:"outline",className:"flex-1",asChild:!0,children:(0,a.jsx)(i.default,{href:`/organizations/edit?id=${t.id}`,children:"Edit"})})]})]},t.id),b=m.length>0||w.length>0;return(0,a.jsxs)("div",{className:"container mx-auto p-8 max-w-7xl",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"My Organizations"}),(0,a.jsx)(c.Button,{asChild:!0,children:(0,a.jsx)(i.default,{href:"/organizations/create",children:"Create Organization"})})]}),b?(0,a.jsxs)(a.Fragment,{children:[m.length>0&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Organizations I Own"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(t=>v(t,!0))})]}),w.length>0&&(0,a.jsxs)("div",{className:m.length>0?"mt-8":"",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Organizations I Collaborate With"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(t=>v(t,!1))})]})]}):(0,a.jsx)(l.Card,{children:(0,a.jsxs)(l.CardContent,{className:"py-12 text-center",children:[(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"You don't have any organizations yet."}),(0,a.jsx)(c.Button,{asChild:!0,children:(0,a.jsx)(i.default,{href:"/organizations/create",children:"Create Your First Organization"})})]})})]})}t.s(["default",()=>d])}]);