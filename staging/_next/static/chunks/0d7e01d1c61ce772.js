(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";e.i(47167);var t=e.i(43476),a=e.i(71645),s=e.i(47163);function r({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center px-6 [.border-t]:pt-6",e),...a})}var i=e.i(67881),d=e.i(22016),o=e.i(38036);function c({id:e,onClose:s}){let[r,l]=(0,a.useState)(null),[n,c]=(0,a.useState)(!0),[x,h]=(0,a.useState)(null),[m,u]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null),[p]=(0,a.useState)(()=>null!==localStorage.getItem("auth_tokens"));return((0,a.useEffect)(()=>{if(!e)return;let t=!1;fetch(`https://APimenta4.pythonanywhere.com/api/events/${e}/`).then(e=>{if(!e.ok)throw Error(`Status ${e.status}`);return e.json()}).then(e=>{t||l(e)}).catch(e=>{t||h(e&&e.message||"Failed to load event")}).finally(()=>{t||c(!1)});let a=e=>{"Escape"===e.key&&s()};return window.addEventListener("keydown",a),()=>{t=!0,window.removeEventListener("keydown",a)}},[e,s]),(0,a.useEffect)(()=>{p&&(0,o.fetchWithAuth)("https://APimenta4.pythonanywhere.com/api/auth/users/me/").then(e=>{if(!e.ok)throw Error(`Status ${e.status}`);return e.json()}).then(e=>{f(e)}).catch(()=>{})},[p]),e)?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",role:"dialog","aria-modal":"true",onClick:s,children:(0,t.jsxs)("div",{className:"bg-white rounded-3xl max-w-2xl w-full mx-4 p-10 relative shadow-2xl max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{"aria-label":"Close modal",onClick:s,className:"absolute top-8 right-8 text-gray-400 hover:text-gray-600 text-3xl leading-none",children:"Ã—"}),(0,t.jsxs)("div",{className:"pr-8",children:[n&&(0,t.jsx)("p",{className:"text-lg",children:"Loading..."}),x&&(0,t.jsxs)("p",{className:"text-red-600 text-lg",children:["Error: ",x]}),!n&&!x&&r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h2",{className:`text-3xl font-bold ${r.status?"mb-2":"mb-8"}`,children:r.name}),r.status&&(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)("span",{className:`px-3 py-1 text-sm font-semibold text-white rounded-full ${"Active"===r.status?"bg-green-500":"bg-red-500"}`,children:r.status})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold uppercase tracking-wider text-gray-700 mb-2",children:"Date"}),(0,t.jsx)("div",{className:"text-base text-gray-800",children:r.date?new Date(r.date).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"})]}),r.location&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold uppercase tracking-wider text-gray-700 mb-2",children:"Location"}),(0,t.jsx)("div",{className:"text-base text-gray-800",children:r.location})]}),r.organizer_name&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold uppercase tracking-wider text-gray-700 mb-2",children:"Organizer"}),(0,t.jsx)("div",{className:"text-base text-gray-800",children:r.organizer_name})]}),r.description&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold uppercase tracking-wider text-gray-700 mb-2",children:"Description"}),(0,t.jsx)("div",{className:"text-base text-gray-800 leading-relaxed whitespace-pre-wrap",children:r.description})]})]}),g?.role==="ORGANIZER"&&g.id===r.organizer&&(0,t.jsxs)("div",{className:"border-t border-gray-200 mt-6 pt-6",children:[(0,t.jsxs)("button",{onClick:()=>u(!m),className:"w-full flex justify-between items-center text-left text-lg font-semibold text-gray-800 hover:text-gray-900","aria-expanded":m,children:[(0,t.jsx)("span",{children:"Participants"}),(0,t.jsx)("span",{className:`transform transition-transform duration-200 ${m?"rotate-180":""}`,children:"â–¼"})]}),m&&(0,t.jsx)("div",{className:"mt-4 text-gray-700",children:"Participant list goes here..."})]}),p?(0,t.jsxs)(t.Fragment,{children:[g?.role==="ATTENDEE"&&(0,t.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200 flex gap-4",children:[(0,t.jsx)(d.default,{href:"",className:"flex-1",children:(0,t.jsx)(i.Button,{className:"w-full bg-gray-800 hover:bg-gray-500 text-white font-bold py-4 rounded-xl",children:"Participate"})}),(0,t.jsx)(d.default,{href:"",className:"flex-1",children:(0,t.jsx)(i.Button,{className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-4 rounded-xl",children:"Interested"})})]}),g?.role==="ORGANIZER"&&g?.id===r.organizer&&(0,t.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200 flex gap-4",children:[(0,t.jsx)(d.default,{href:`/events/edit/${r.id}`,className:"flex-1",children:(0,t.jsx)(i.Button,{className:"w-full bg-gray-800 hover:bg-gray-500 text-white font-bold py-4 rounded-xl",children:"Edit"})}),(0,t.jsx)(d.default,{href:"",className:"flex-1",children:(0,t.jsx)(i.Button,{className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-4 rounded-xl",children:"Cancel"})})]})]}):(0,t.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200 flex gap-4",children:(0,t.jsx)(d.default,{href:"/profile/login",className:"flex-1",children:(0,t.jsx)(i.Button,{className:"w-full bg-gray-800 hover:bg-gray-900 text-white font-bold py-4 rounded-xl",children:"Login"})})})]})]})]})}):null}function x(){let[e,s]=(0,a.useState)([]),[d,o]=(0,a.useState)(!0),[x,h]=(0,a.useState)(null),[m,u]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("https://APimenta4.pythonanywhere.com/api/events/upcoming/");if(!e.ok)throw Error("Failed to fetch events");let t=await e.json();s(t.results??[])}catch(e){h(e.message||"Unknown error")}finally{o(!1)}})()},[]),d)?(0,t.jsx)("p",{children:"Loading events..."}):x?(0,t.jsxs)("p",{children:["Error: ",x]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-bold mb-6",children:"Upcoming Events"}),0===e.length&&(0,t.jsx)("p",{children:"No events available"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>(0,t.jsxs)(r,{className:"shadow hover:shadow-lg transition",children:[(0,t.jsxs)(l,{children:[(0,t.jsx)("h3",{className:"text-xl font-semibold",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.date).toLocaleString()}),e.location&&(0,t.jsxs)("p",{className:"text-sm text-gray-700 mt-1",children:["ðŸ“ ",e.location]})]}),(0,t.jsx)(n,{children:(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>{f(String(e.id)),u(!0)},children:"View Details"})})]},e.id))}),m&&(0,t.jsx)(c,{id:g,onClose:()=>{u(!1),f(null)}})]})}e.s(["default",()=>x],31713)}]);