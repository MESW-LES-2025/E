(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var a=e.i(43476),t=e.i(47163);function s({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function r({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function i({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...s})}function d({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...s})}function n({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...s})}function l({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,t.cn)("flex items-center px-6 [.border-t]:pt-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>n,"CardDescription",()=>d,"CardFooter",()=>l,"CardHeader",()=>r,"CardTitle",()=>i])},11797,e=>{"use strict";var a=e.i(43476),t=e.i(67881),s=e.i(70065),r=e.i(9572),i=e.i(71645);function d(){let[e,d]=(0,i.useState)([]),[n,l]=(0,i.useState)(!0),[c,o]=(0,i.useState)(!1),[x,m]=(0,i.useState)(null),u=async()=>{try{l(!0),m(null);let e=await (0,r.listNotifications)();d(e)}catch(e){console.error(e),m("Failed to load notifications")}finally{l(!1)}};(0,i.useEffect)(()=>{u()},[]);let h=async(e,a)=>{try{o(!0),a?await (0,r.markAsRead)(e):await (0,r.markAsUnread)(e),d(t=>t.map(t=>t.id===e?{...t,is_read:a}:t))}catch(e){console.error(e),m("Failed to update notification")}finally{o(!1)}},f=async()=>{try{o(!0),await (0,r.markAllAsRead)(),d(e=>e.map(e=>({...e,is_read:!0})))}catch(e){console.error(e),m("Failed to mark all as read")}finally{o(!1)}},j=e.filter(e=>!e.is_read).length;return(0,a.jsxs)("div",{className:"container mx-auto p-8 max-w-3xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Notifications"}),(0,a.jsx)(t.Button,{variant:"outline",disabled:c||0===j,onClick:f,children:"Mark all as read"})]}),n?(0,a.jsx)(s.Card,{children:(0,a.jsx)(s.CardContent,{className:"py-8 text-center",children:"Loading..."})}):x?(0,a.jsx)(s.Card,{children:(0,a.jsx)(s.CardContent,{className:"py-8 text-center text-red-600",children:x})}):0===e.length?(0,a.jsx)("p",{className:"text-muted-foreground",children:"No notifications."}):(0,a.jsx)("ul",{className:"space-y-3",children:e.map(e=>(0,a.jsxs)("li",{className:`border rounded p-4 flex items-start gap-3 ${e.is_read?"bg-white":"bg-yellow-50"}`,children:[(0,a.jsx)("input",{type:"checkbox",className:"mt-1 h-4 w-4",checked:e.is_read,onChange:a=>h(e.id,a.target.checked),"aria-label":e.is_read?"Mark as unread":"Mark as read",disabled:c}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("h2",{className:`font-semibold ${e.is_read?"":"text-yellow-900"}`,children:e.title}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleString()})]}),e.message&&(0,a.jsx)("p",{className:"mt-2 text-sm",children:e.message}),(0,a.jsx)("div",{className:"mt-2",children:e.is_read?(0,a.jsx)(t.Button,{size:"sm",variant:"secondary",onClick:()=>h(e.id,!1),disabled:c,children:"Mark as unread"}):(0,a.jsx)(t.Button,{size:"sm",onClick:()=>h(e.id,!0),disabled:c,children:"Mark as read"})})]})]},e.id))})]})}e.s(["default",()=>d])}]);