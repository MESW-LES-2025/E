module.exports=[20845,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(47033),f=a.i(60999),g=a.i(40695),h=a.i(5522),i=a.i(3130),j=a.i(16474),k=a.i(87682);function l(){let a=(0,d.useRouter)(),l=Number((0,d.useSearchParams)().get("id")),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)({}),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(""),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)(""),[S,T]=(0,c.useState)(""),[U,V]=(0,c.useState)(""),[W,X]=(0,c.useState)(""),[Y,Z]=(0,c.useState)(""),[$,_]=(0,c.useState)(""),[aa,ab]=(0,c.useState)(""),[ac,ad]=(0,c.useState)(""),[ae,af]=(0,c.useState)(""),[ag,ah]=(0,c.useState)("");(0,c.useEffect)(()=>{n(!0);let b=(0,e.isAuthenticated)();if(p(b),!b)return void a.replace("/profile/login");if(!l||isNaN(l)){z("Invalid organization ID"),t(!1);return}(async()=>{try{t(!0),z(null);let a=await (0,f.getOrganization)(l);if(!("owner_id"in a)){z("You don't have permission to edit this organization"),t(!1);return}D(!0),r(a),F(a.name),H(a.description||""),J(a.email||""),L(a.website||""),N(a.phone||""),P(a.address||""),R(a.city||""),T(a.country||""),V(a.logo_url||""),X(a.cover_image_url||""),Z(a.twitter_handle||""),_(a.facebook_url||""),ab(a.linkedin_url||""),ad(a.instagram_handle||""),af(a.organization_type||""),ah(a.established_date?new Date(a.established_date).toISOString().split("T")[0]:"")}catch(a){z(a instanceof Error?a.message:"Failed to load organization")}finally{t(!1)}})()},[a,l]);let ai=async b=>{if(b.preventDefault(),v(!0),z(null),B({}),!E.trim()){B({name:"Name is required"}),v(!1);return}let c={name:E.trim(),description:G.trim()||void 0,email:I.trim()||void 0,website:K.trim()||void 0,phone:M.trim()||void 0,address:O.trim()||void 0,city:Q.trim()||void 0,country:S.trim()||void 0,logo_url:U.trim()||void 0,cover_image_url:W.trim()||void 0,twitter_handle:Y.trim()||void 0,facebook_url:$.trim()||void 0,linkedin_url:aa.trim()||void 0,instagram_handle:ac.trim()||void 0,organization_type:ae||void 0,established_date:ag||void 0};try{let b=await (0,f.updateOrganization)(l,c),d=sessionStorage.getItem("org_detail_referrer")||sessionStorage.getItem("org_edit_referrer");d&&sessionStorage.setItem("org_detail_referrer",d),a.replace(`/organizations/detail?id=${b.id}`)}catch(a){if(a&&"object"==typeof a){let b={};Object.keys(a).forEach(c=>{let d=a[c];Array.isArray(d)?b[c]=d[0]:"string"==typeof d&&(b[c]=d)}),B(b),z("Please fix the errors below")}else z(a instanceof Error?a.message:"Failed to update organization")}finally{v(!1)}},aj=async()=>{if(confirm("Are you sure you want to delete this organization? This action cannot be undone.")){x(!0),z(null);try{await (0,f.deleteOrganization)(l),a.push("/organizations")}catch(a){z(a instanceof Error?a.message:"Failed to delete organization"),x(!1)}}};return m&&o&&!s?y&&!C?(0,b.jsx)("div",{className:"container mx-auto p-8 max-w-4xl",children:(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{children:"Access Denied"}),(0,b.jsx)(i.CardDescription,{children:y})]}),(0,b.jsx)(i.CardFooter,{children:(0,b.jsx)(g.Button,{variant:"outline",onClick:()=>a.push(`/organizations/detail?id=${l}`),children:"Back to Organization"})})]})}):q?(0,b.jsxs)("div",{className:"container mx-auto p-8 max-w-4xl",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)(g.Button,{variant:"outline",onClick:()=>a.back(),children:"â† Back"})}),(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{children:"Edit Organization"}),(0,b.jsx)(i.CardDescription,{children:"Update your organization information. Only the owner can edit."})]}),(0,b.jsxs)("form",{onSubmit:ai,children:[(0,b.jsxs)(i.CardContent,{children:[y&&!Object.keys(A).length&&(0,b.jsx)("div",{className:"mb-6 p-4 bg-destructive/10 text-destructive rounded-md",children:y}),(0,b.jsxs)(j.FieldGroup,{children:[(0,b.jsxs)(j.Field,{children:[(0,b.jsxs)(j.FieldLabel,{htmlFor:"name",children:["Name ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsxs)(j.FieldContent,{children:[(0,b.jsx)(h.Input,{id:"name",value:E,onChange:a=>F(a.target.value),required:!0,"data-invalid":!!A.name}),(0,b.jsx)(j.FieldError,{errors:A.name?[{message:A.name}]:void 0})]})]}),(0,b.jsxs)(j.Field,{children:[(0,b.jsx)(j.FieldLabel,{htmlFor:"description",children:"Description"}),(0,b.jsxs)(j.FieldContent,{children:[(0,b.jsx)("textarea",{id:"description",value:G,onChange:a=>H(a.target.value),rows:4,className:"flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"}),(0,b.jsx)(j.FieldDescription,{children:"A brief description of your organization"})]})]}),(0,b.jsxs)(j.Field,{children:[(0,b.jsx)(j.FieldLabel,{htmlFor:"organization_type",children:"Organization Type"}),(0,b.jsx)(j.FieldContent,{children:(0,b.jsxs)(k.Select,{value:ae||void 0,onValueChange:a=>af("NOT_SPECIFIED"===a?"":a),children:[(0,b.jsx)(k.SelectTrigger,{id:"organization_type",children:(0,b.jsx)(k.SelectValue,{placeholder:"Select type"})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"NOT_SPECIFIED",children:"Not specified"}),(0,b.jsx)(k.SelectItem,{value:"COMPANY",children:"Company"}),(0,b.jsx)(k.SelectItem,{value:"NON_PROFIT",children:"Non-profit"}),(0,b.jsx)(k.SelectItem,{value:"COMMUNITY",children:"Community"}),(0,b.jsx)(k.SelectItem,{value:"EDUCATIONAL",children:"Educational"}),(0,b.jsx)(k.SelectItem,{value:"GOVERNMENT",children:"Government"}),(0,b.jsx)(k.SelectItem,{value:"OTHER",children:"Other"})]})]})})]}),(0,b.jsxs)(j.Field,{children:[(0,b.jsx)(j.FieldLabel,{htmlFor:"email",children:"Email"}),(0,b.jsxs)(j.FieldContent,{children:[(0,b.jsx)(h.Input,{id:"email",type:"email",value:I,onChange:a=>J(a.target.value),"data-invalid":!!A.email}),(0,b.jsx)(j.FieldError,{errors:A.email?[{message:A.email}]:void 0})]})]}),(0,b.jsxs)(j.Field,{children:[(0,b.jsx)(j.FieldLabel,{htmlFor:"website",children:"Website"}),(0,b.jsxs)(j.FieldContent,{children:[(0,b.jsx)(h.Input,{id:"website",type:"url",value:K,onChange:a=>L(a.target.value),placeholder:"https://example.com","data-invalid":!!A.website}),(0,b.jsx)(j.FieldError,{errors:A.website?[{message:A.website}]:void 0})]})]}),(0,b.jsxs)(j.Field,{children:[(0,b.jsx)(j.FieldLabel,{htmlFor:"phone",children:"Phone"}),(0,b.jsxs)(j.FieldContent,{children:[(0,b.jsx)(h.Input,{id:"phone",type:"tel",value:M,onChange:a=>N(a.target.value),"data-invalid":!!A.phone}),(0,b.jsx)(j.FieldError,{errors:A.phone?[{message:A.phone}]:void 0})]})]}),(0,b.jsxs)(j.Field,{children:[(0,b.jsx)(j.FieldLabel,{htmlFor:"address",children:"Address"}),(0,b.jsxs)(j.FieldContent,{children:[(0,b.jsx)(h.Input,{id:"address",value:O,onChange:a=>P(a.target.value),"data-invalid":!!A.address}),(0,b.jsx)(j.FieldError,{errors:A.address?[{message:A.address}]:void 0})]})]}),(0,b.jsxs)(j.Field,{children:[(0,b.jsx)(j.FieldLabel,{htmlFor:"city",children:"City"}),(0,b.jsxs)(j.FieldContent,{children:[(0,b.jsx)(h.Input,{id:"city",value:Q,onChange:a=>R(a.target.value),"data-invalid":!!A.city}),(0,b.jsx)(j.FieldError,{errors:A.city?[{message:A.city}]:void 0})]})]}),(0,b.jsxs)(j.Field,{children:[(0,b.jsx)(j.FieldLabel,{htmlFor:"country",children:"Country"}),(0,b.jsxs)(j.FieldContent,{children:[(0,b.jsx)(h.Input,{id:"country",value:S,onChange:a=>T(a.target.value),"data-invalid":!!A.country}),(0,b.jsx)(j.FieldError,{errors:A.country?[{message:A.country}]:void 0})]})]}),(0,b.jsxs)(j.Field,{children:[(0,b.jsx)(j.FieldLabel,{htmlFor:"logo_url",children:"Logo URL"}),(0,b.jsxs)(j.FieldContent,{children:[(0,b.jsx)(h.Input,{id:"logo_url",type:"url",value:U,onChange:a=>V(a.target.value),placeholder:"https://example.com/logo.png","data-invalid":!!A.logo_url}),(0,b.jsx)(j.FieldError,{errors:A.logo_url?[{message:A.logo_url}]:void 0})]})]}),(0,b.jsxs)(j.Field,{children:[(0,b.jsx)(j.FieldLabel,{htmlFor:"cover_image_url",children:"Cover Image URL"}),(0,b.jsxs)(j.FieldContent,{children:[(0,b.jsx)(h.Input,{id:"cover_image_url",type:"url",value:W,onChange:a=>X(a.target.value),placeholder:"https://example.com/cover.jpg","data-invalid":!!A.cover_image_url}),(0,b.jsx)(j.FieldError,{errors:A.cover_image_url?[{message:A.cover_image_url}]:void 0})]})]}),(0,b.jsxs)(j.Field,{children:[(0,b.jsx)(j.FieldLabel,{htmlFor:"twitter_handle",children:"Twitter Handle"}),(0,b.jsxs)(j.FieldContent,{children:[(0,b.jsx)(h.Input,{id:"twitter_handle",value:Y,onChange:a=>Z(a.target.value),placeholder:"@username","data-invalid":!!A.twitter_handle}),(0,b.jsx)(j.FieldError,{errors:A.twitter_handle?[{message:A.twitter_handle}]:void 0})]})]}),(0,b.jsxs)(j.Field,{children:[(0,b.jsx)(j.FieldLabel,{htmlFor:"facebook_url",children:"Facebook URL"}),(0,b.jsxs)(j.FieldContent,{children:[(0,b.jsx)(h.Input,{id:"facebook_url",type:"url",value:$,onChange:a=>_(a.target.value),placeholder:"https://facebook.com/...","data-invalid":!!A.facebook_url}),(0,b.jsx)(j.FieldError,{errors:A.facebook_url?[{message:A.facebook_url}]:void 0})]})]}),(0,b.jsxs)(j.Field,{children:[(0,b.jsx)(j.FieldLabel,{htmlFor:"linkedin_url",children:"LinkedIn URL"}),(0,b.jsxs)(j.FieldContent,{children:[(0,b.jsx)(h.Input,{id:"linkedin_url",type:"url",value:aa,onChange:a=>ab(a.target.value),placeholder:"https://linkedin.com/company/...","data-invalid":!!A.linkedin_url}),(0,b.jsx)(j.FieldError,{errors:A.linkedin_url?[{message:A.linkedin_url}]:void 0})]})]}),(0,b.jsxs)(j.Field,{children:[(0,b.jsx)(j.FieldLabel,{htmlFor:"instagram_handle",children:"Instagram Handle"}),(0,b.jsxs)(j.FieldContent,{children:[(0,b.jsx)(h.Input,{id:"instagram_handle",value:ac,onChange:a=>ad(a.target.value),placeholder:"@username","data-invalid":!!A.instagram_handle}),(0,b.jsx)(j.FieldError,{errors:A.instagram_handle?[{message:A.instagram_handle}]:void 0})]})]}),(0,b.jsxs)(j.Field,{children:[(0,b.jsx)(j.FieldLabel,{htmlFor:"established_date",children:"Established Date"}),(0,b.jsxs)(j.FieldContent,{children:[(0,b.jsx)(h.Input,{id:"established_date",type:"date",value:ag,onChange:a=>ah(a.target.value),"data-invalid":!!A.established_date}),(0,b.jsx)(j.FieldError,{errors:A.established_date?[{message:A.established_date}]:void 0})]})]})]})]}),(0,b.jsxs)(i.CardFooter,{className:"flex gap-2 justify-between mt-6",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Button,{type:"submit",disabled:u,children:u?"Saving...":"Save Changes"}),(0,b.jsx)(g.Button,{type:"button",variant:"outline",onClick:()=>a.back(),children:"Cancel"})]}),(0,b.jsx)(g.Button,{type:"button",variant:"destructive",onClick:aj,disabled:w,children:w?"Deleting...":"Delete Organization"})]})]})]})]}):(0,b.jsx)("div",{className:"container mx-auto p-8 max-w-4xl",children:(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{children:"Error"}),(0,b.jsx)(i.CardDescription,{children:"Organization not found"})]}),(0,b.jsx)(i.CardFooter,{children:(0,b.jsx)(g.Button,{variant:"outline",onClick:()=>a.push("/organizations"),children:"Back to Organizations"})})]})}):(0,b.jsx)("div",{className:"container mx-auto p-8 max-w-4xl",children:(0,b.jsx)("p",{children:"Loading..."})})}function m(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"container mx-auto p-8 max-w-4xl",children:(0,b.jsx)("p",{children:"Loading..."})}),children:(0,b.jsx)(l,{})})}a.s(["default",()=>m])}];

//# sourceMappingURL=app_organizations_edit_page_tsx_cde854b6._.js.map