module.exports=[33943,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(47033),f=a.i(36099),g=a.i(60999),h=a.i(40695),i=a.i(5522),j=a.i(3130),k=a.i(16474),l=a.i(87682);function m(){let a=(0,d.useRouter)(),m=(0,d.usePathname)(),[n,o]=(0,c.useState)(Date.now()),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)({}),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)(""),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)(""),[T,U]=(0,c.useState)(""),[V,W]=(0,c.useState)(""),[X,Y]=(0,c.useState)(""),[Z,$]=(0,c.useState)(""),[_,aa]=(0,c.useState)(""),[ab,ac]=(0,c.useState)(""),[ad,ae]=(0,c.useState)(""),[af,ag]=(0,c.useState)("");(0,c.useEffect)(()=>{q(!0);let b=(0,e.isAuthenticated)();(s(b),b)?(sessionStorage.getItem("org_just_created")&&(sessionStorage.removeItem("org_just_created"),o(Date.now())),E(""),G(""),I(""),K(""),M(""),O(""),Q(""),S(""),U(""),W(""),Y(""),$(""),aa(""),ac(""),ae(""),ag(""),C({}),A(null),(async()=>{try{w(!0),A(null);let b=await (0,f.getProfile)();if(u(b),"ORGANIZER"!==b.role)return void a.replace("/organizations")}catch(a){A(a instanceof Error?a.message:"Failed to load profile. Please make sure you are logged in.")}finally{w(!1)}})()):a.replace("/profile/login")},[a]),(0,c.useEffect)(()=>{"/organizations/create"===m&&p&&(E(""),G(""),I(""),K(""),M(""),O(""),Q(""),S(""),U(""),W(""),Y(""),$(""),aa(""),ac(""),ae(""),ag(""),C({}),A(null),o(Date.now()))},[m,p]);let ah=async b=>{if(b.preventDefault(),t&&"ORGANIZER"!==t.role)return void A(`Only users with ORGANIZER role can create organizations. Your current role is: ${t.role}`);if(y(!0),A(null),C({}),!D.trim()){C({name:"Name is required"}),y(!1);return}let c={name:D.trim(),description:F.trim()||void 0,email:H.trim()||void 0,website:J.trim()||void 0,phone:L.trim()||void 0,address:N.trim()||void 0,city:P.trim()||void 0,country:R.trim()||void 0,logo_url:T.trim()||void 0,cover_image_url:V.trim()||void 0,twitter_handle:X.trim()||void 0,facebook_url:Z.trim()||void 0,linkedin_url:_.trim()||void 0,instagram_handle:ab.trim()||void 0,organization_type:ad||void 0,established_date:af||void 0};try{let b=await (0,g.createOrganization)(c);sessionStorage.setItem("org_just_created","true"),E(""),G(""),I(""),K(""),M(""),O(""),Q(""),S(""),U(""),W(""),Y(""),$(""),aa(""),ac(""),ae(""),ag(""),C({}),a.replace(`/organizations/${b.id}`)}catch(a){if(a&&"object"==typeof a){let b={};Object.keys(a).forEach(c=>{let d=a[c];Array.isArray(d)?b[c]=d[0]:"string"==typeof d&&(b[c]=d)}),C(b),A("Please fix the errors below")}else A(a instanceof Error?a.message:"Failed to create organization")}finally{y(!1)}};return!r||v?(0,b.jsx)("div",{className:"container mx-auto p-8 max-w-4xl",children:(0,b.jsx)("p",{children:"Loading..."})}):z&&t?.role!=="ORGANIZER"?(0,b.jsx)("div",{className:"container mx-auto p-8 max-w-4xl",children:(0,b.jsxs)(j.Card,{children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsx)(j.CardTitle,{children:"Access Denied"}),(0,b.jsx)(j.CardDescription,{children:z})]}),(0,b.jsx)(j.CardFooter,{children:(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>a.push("/organizations"),children:"Back to Organizations"})})]})}):(0,b.jsxs)("div",{className:"container mx-auto p-8 max-w-4xl",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>a.push("/organizations/my"),children:"â† Back to My Organizations"})}),(0,b.jsxs)(j.Card,{children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsx)(j.CardTitle,{children:"Create Organization"}),(0,b.jsx)(j.CardDescription,{children:"Create a new organization profile. Only users with ORGANIZER role can create organizations."})]}),(0,b.jsxs)("form",{onSubmit:ah,children:[(0,b.jsxs)(j.CardContent,{children:[z&&!Object.keys(B).length&&(0,b.jsx)("div",{className:"mb-6 p-4 bg-destructive/10 text-destructive rounded-md",children:z}),(0,b.jsxs)(k.FieldGroup,{children:[(0,b.jsxs)(k.Field,{children:[(0,b.jsxs)(k.FieldLabel,{htmlFor:"name",children:["Name ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsxs)(k.FieldContent,{children:[(0,b.jsx)(i.Input,{id:"name",value:D,onChange:a=>E(a.target.value),required:!0,"data-invalid":!!B.name}),(0,b.jsx)(k.FieldError,{errors:B.name?[{message:B.name}]:void 0})]})]}),(0,b.jsxs)(k.Field,{children:[(0,b.jsx)(k.FieldLabel,{htmlFor:"description",children:"Description"}),(0,b.jsxs)(k.FieldContent,{children:[(0,b.jsx)("textarea",{id:"description",value:F,onChange:a=>G(a.target.value),rows:4,className:"flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"}),(0,b.jsx)(k.FieldDescription,{children:"A brief description of your organization"})]})]}),(0,b.jsxs)(k.Field,{children:[(0,b.jsx)(k.FieldLabel,{htmlFor:"organization_type",children:"Organization Type"}),(0,b.jsx)(k.FieldContent,{children:(0,b.jsxs)(l.Select,{value:ad||void 0,onValueChange:a=>ae("NOT_SPECIFIED"===a?"":a),children:[(0,b.jsx)(l.SelectTrigger,{id:"organization_type",children:(0,b.jsx)(l.SelectValue,{placeholder:"Select type"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"NOT_SPECIFIED",children:"Not specified"}),(0,b.jsx)(l.SelectItem,{value:"COMPANY",children:"Company"}),(0,b.jsx)(l.SelectItem,{value:"NON_PROFIT",children:"Non-profit"}),(0,b.jsx)(l.SelectItem,{value:"COMMUNITY",children:"Community"}),(0,b.jsx)(l.SelectItem,{value:"EDUCATIONAL",children:"Educational"}),(0,b.jsx)(l.SelectItem,{value:"GOVERNMENT",children:"Government"}),(0,b.jsx)(l.SelectItem,{value:"OTHER",children:"Other"})]})]})})]}),(0,b.jsxs)(k.Field,{children:[(0,b.jsx)(k.FieldLabel,{htmlFor:"email",children:"Email"}),(0,b.jsxs)(k.FieldContent,{children:[(0,b.jsx)(i.Input,{id:"email",type:"email",value:H,onChange:a=>I(a.target.value),"data-invalid":!!B.email}),(0,b.jsx)(k.FieldError,{errors:B.email?[{message:B.email}]:void 0})]})]}),(0,b.jsxs)(k.Field,{children:[(0,b.jsx)(k.FieldLabel,{htmlFor:"website",children:"Website"}),(0,b.jsxs)(k.FieldContent,{children:[(0,b.jsx)(i.Input,{id:"website",type:"url",value:J,onChange:a=>K(a.target.value),placeholder:"https://example.com","data-invalid":!!B.website}),(0,b.jsx)(k.FieldError,{errors:B.website?[{message:B.website}]:void 0})]})]}),(0,b.jsxs)(k.Field,{children:[(0,b.jsx)(k.FieldLabel,{htmlFor:"phone",children:"Phone"}),(0,b.jsxs)(k.FieldContent,{children:[(0,b.jsx)(i.Input,{id:"phone",type:"tel",value:L,onChange:a=>M(a.target.value),"data-invalid":!!B.phone}),(0,b.jsx)(k.FieldError,{errors:B.phone?[{message:B.phone}]:void 0})]})]}),(0,b.jsxs)(k.Field,{children:[(0,b.jsx)(k.FieldLabel,{htmlFor:"address",children:"Address"}),(0,b.jsxs)(k.FieldContent,{children:[(0,b.jsx)(i.Input,{id:"address",value:N,onChange:a=>O(a.target.value),"data-invalid":!!B.address}),(0,b.jsx)(k.FieldError,{errors:B.address?[{message:B.address}]:void 0})]})]}),(0,b.jsxs)(k.Field,{children:[(0,b.jsx)(k.FieldLabel,{htmlFor:"city",children:"City"}),(0,b.jsxs)(k.FieldContent,{children:[(0,b.jsx)(i.Input,{id:"city",value:P,onChange:a=>Q(a.target.value),"data-invalid":!!B.city}),(0,b.jsx)(k.FieldError,{errors:B.city?[{message:B.city}]:void 0})]})]}),(0,b.jsxs)(k.Field,{children:[(0,b.jsx)(k.FieldLabel,{htmlFor:"country",children:"Country"}),(0,b.jsxs)(k.FieldContent,{children:[(0,b.jsx)(i.Input,{id:"country",value:R,onChange:a=>S(a.target.value),"data-invalid":!!B.country}),(0,b.jsx)(k.FieldError,{errors:B.country?[{message:B.country}]:void 0})]})]}),(0,b.jsxs)(k.Field,{children:[(0,b.jsx)(k.FieldLabel,{htmlFor:"logo_url",children:"Logo URL"}),(0,b.jsxs)(k.FieldContent,{children:[(0,b.jsx)(i.Input,{id:"logo_url",type:"url",value:T,onChange:a=>U(a.target.value),placeholder:"https://example.com/logo.png","data-invalid":!!B.logo_url}),(0,b.jsx)(k.FieldError,{errors:B.logo_url?[{message:B.logo_url}]:void 0})]})]}),(0,b.jsxs)(k.Field,{children:[(0,b.jsx)(k.FieldLabel,{htmlFor:"cover_image_url",children:"Cover Image URL"}),(0,b.jsxs)(k.FieldContent,{children:[(0,b.jsx)(i.Input,{id:"cover_image_url",type:"url",value:V,onChange:a=>W(a.target.value),placeholder:"https://example.com/cover.jpg","data-invalid":!!B.cover_image_url}),(0,b.jsx)(k.FieldError,{errors:B.cover_image_url?[{message:B.cover_image_url}]:void 0})]})]}),(0,b.jsxs)(k.Field,{children:[(0,b.jsx)(k.FieldLabel,{htmlFor:"twitter_handle",children:"Twitter Handle"}),(0,b.jsxs)(k.FieldContent,{children:[(0,b.jsx)(i.Input,{id:"twitter_handle",value:X,onChange:a=>Y(a.target.value),placeholder:"@username","data-invalid":!!B.twitter_handle}),(0,b.jsx)(k.FieldError,{errors:B.twitter_handle?[{message:B.twitter_handle}]:void 0})]})]}),(0,b.jsxs)(k.Field,{children:[(0,b.jsx)(k.FieldLabel,{htmlFor:"facebook_url",children:"Facebook URL"}),(0,b.jsxs)(k.FieldContent,{children:[(0,b.jsx)(i.Input,{id:"facebook_url",type:"url",value:Z,onChange:a=>$(a.target.value),placeholder:"https://facebook.com/...","data-invalid":!!B.facebook_url}),(0,b.jsx)(k.FieldError,{errors:B.facebook_url?[{message:B.facebook_url}]:void 0})]})]}),(0,b.jsxs)(k.Field,{children:[(0,b.jsx)(k.FieldLabel,{htmlFor:"linkedin_url",children:"LinkedIn URL"}),(0,b.jsxs)(k.FieldContent,{children:[(0,b.jsx)(i.Input,{id:"linkedin_url",type:"url",value:_,onChange:a=>aa(a.target.value),placeholder:"https://linkedin.com/company/...","data-invalid":!!B.linkedin_url}),(0,b.jsx)(k.FieldError,{errors:B.linkedin_url?[{message:B.linkedin_url}]:void 0})]})]}),(0,b.jsxs)(k.Field,{children:[(0,b.jsx)(k.FieldLabel,{htmlFor:"instagram_handle",children:"Instagram Handle"}),(0,b.jsxs)(k.FieldContent,{children:[(0,b.jsx)(i.Input,{id:"instagram_handle",value:ab,onChange:a=>ac(a.target.value),placeholder:"@username","data-invalid":!!B.instagram_handle}),(0,b.jsx)(k.FieldError,{errors:B.instagram_handle?[{message:B.instagram_handle}]:void 0})]})]}),(0,b.jsxs)(k.Field,{children:[(0,b.jsx)(k.FieldLabel,{htmlFor:"established_date",children:"Established Date"}),(0,b.jsxs)(k.FieldContent,{children:[(0,b.jsx)(i.Input,{id:"established_date",type:"date",value:af,onChange:a=>ag(a.target.value),"data-invalid":!!B.established_date}),(0,b.jsx)(k.FieldError,{errors:B.established_date?[{message:B.established_date}]:void 0})]})]})]})]}),(0,b.jsxs)(j.CardFooter,{className:"flex gap-2 mt-6",children:[(0,b.jsx)(h.Button,{type:"submit",disabled:x||!!(t&&"ORGANIZER"!==t.role),children:x?"Creating...":"Create Organization"}),(0,b.jsx)(h.Button,{type:"button",variant:"outline",onClick:()=>a.back(),children:"Cancel"})]})]},n)]})]})}a.s(["default",()=>m])}];

//# sourceMappingURL=app_organizations_create_page_tsx_3f5a507a._.js.map