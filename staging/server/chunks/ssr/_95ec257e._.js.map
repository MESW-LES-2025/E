{"version":3,"sources":["turbopack:///[project]/components/ui/card.tsx","turbopack:///[project]/lib/organizations.ts","turbopack:///[project]/components/OrganizationCard.tsx","turbopack:///[project]/app/organizations/page.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n};\n","import { fetchWithAuth } from \"./auth\";\n\nconst API_BASE =\n  process.env.NEXT_PUBLIC_API_BASE_URL || \"http://localhost:8000/api\";\n\nexport type OrganizationType =\n  | \"COMPANY\"\n  | \"NON_PROFIT\"\n  | \"COMMUNITY\"\n  | \"EDUCATIONAL\"\n  | \"GOVERNMENT\"\n  | \"OTHER\";\n\n// Public organization (what non-owners see)\nexport interface PublicOrganization {\n  id: number;\n  name: string;\n  description: string;\n  email: string;\n  website: string;\n  phone: string;\n  address: string;\n  city: string;\n  country: string;\n  logo_url: string | null;\n  cover_image_url: string | null;\n  twitter_handle: string;\n  facebook_url: string;\n  linkedin_url: string;\n  instagram_handle: string;\n  organization_type: OrganizationType | null;\n  established_date: string | null;\n  owner_name: string;\n  event_count: number;\n  is_following?: boolean;\n  is_collaborator?: boolean;\n  created_at: string;\n}\n\n// Full organization (what owners see)\nexport interface Organization extends PublicOrganization {\n  owner_id: number;\n  updated_at: string;\n  collaborators?: Collaborator[];\n  is_collaborator?: boolean;\n}\n\nexport interface CreateOrganizationPayload {\n  name: string;\n  description?: string;\n  email?: string;\n  website?: string;\n  phone?: string;\n  address?: string;\n  city?: string;\n  country?: string;\n  logo_url?: string;\n  cover_image_url?: string;\n  twitter_handle?: string;\n  facebook_url?: string;\n  linkedin_url?: string;\n  instagram_handle?: string;\n  organization_type?: OrganizationType;\n  established_date?: string;\n}\n\nexport type UpdateOrganizationPayload = Partial<CreateOrganizationPayload>;\n\nexport interface OrganizationEvent {\n  id: number;\n  name: string;\n  date: string;\n  location?: string;\n  description?: string;\n  status: string;\n  capacity?: number;\n  participants?: number[];\n  participant_count?: number;\n  is_participating?: boolean;\n  is_full?: boolean;\n  interest_count?: number;\n}\n\n// List all organizations (public endpoint, but uses auth if available for is_following)\nexport async function listOrganizations(): Promise<PublicOrganization[]> {\n  // Try authenticated request first to get is_following field\n  // Fall back to public request if not authenticated\n  let response;\n  try {\n    response = await fetchWithAuth(`${API_BASE}/accounts/organizations/`, {\n      method: \"GET\",\n    });\n    // If 401/403, try public fetch\n    if (response.status === 401 || response.status === 403) {\n      response = await fetch(`${API_BASE}/accounts/organizations/`);\n    }\n  } catch {\n    // If fetchWithAuth fails, try public fetch\n    response = await fetch(`${API_BASE}/accounts/organizations/`);\n  }\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error(error?.detail || \"Failed to fetch organizations\");\n  }\n\n  const data = await response.json();\n  return Array.isArray(data) ? data : data.results || [];\n}\n\n// Get organization by ID (public endpoint, but returns different data for owners)\nexport async function getOrganization(\n  id: number,\n): Promise<Organization | PublicOrganization> {\n  const response = await fetchWithAuth(\n    `${API_BASE}/accounts/organizations/${id}/`,\n    {\n      method: \"GET\",\n    },\n  );\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error(error?.detail || \"Failed to fetch organization\");\n  }\n\n  return response.json();\n}\n\n// Create organization (requires ORGANIZER role)\nexport async function createOrganization(\n  payload: CreateOrganizationPayload,\n): Promise<Organization> {\n  const response = await fetchWithAuth(`${API_BASE}/accounts/organizations/`, {\n    method: \"POST\",\n    body: JSON.stringify(payload),\n  });\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n\n    // Provide more specific error messages\n    if (response.status === 403) {\n      throw new Error(\n        error?.detail ||\n          \"You don't have permission to create organizations. Only users with ORGANIZER role can create organizations.\",\n      );\n    }\n\n    // Handle validation errors\n    if (response.status === 400 && error) {\n      throw error; // Throw the full error object for field-level validation\n    }\n\n    throw new Error(error?.detail || \"Failed to create organization\");\n  }\n\n  return response.json();\n}\n\n// Update organization (owner only)\nexport async function updateOrganization(\n  id: number,\n  payload: UpdateOrganizationPayload,\n): Promise<Organization> {\n  const response = await fetchWithAuth(\n    `${API_BASE}/accounts/organizations/${id}/`,\n    {\n      method: \"PATCH\",\n      body: JSON.stringify(payload),\n    },\n  );\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error(error?.detail || \"Failed to update organization\");\n  }\n\n  return response.json();\n}\n\n// Delete organization (owner only)\nexport async function deleteOrganization(id: number): Promise<void> {\n  const response = await fetchWithAuth(\n    `${API_BASE}/accounts/organizations/${id}/`,\n    {\n      method: \"DELETE\",\n    },\n  );\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error(error?.detail || \"Failed to delete organization\");\n  }\n}\n\n// Get organization events (public endpoint, but uses auth if available for owners/collaborators)\nexport async function getOrganizationEvents(\n  id: number,\n): Promise<OrganizationEvent[]> {\n  // Try authenticated request first (for owners/collaborators to see all events)\n  // Fall back to public request if not authenticated\n  let response;\n  try {\n    response = await fetchWithAuth(\n      `${API_BASE}/accounts/organizations/${id}/events/`,\n      {\n        method: \"GET\",\n      },\n    );\n    // If 401/403, try public fetch\n    if (response.status === 401 || response.status === 403) {\n      response = await fetch(\n        `${API_BASE}/accounts/organizations/${id}/events/`,\n      );\n    }\n  } catch {\n    // If fetchWithAuth fails, try public fetch\n    response = await fetch(`${API_BASE}/accounts/organizations/${id}/events/`);\n  }\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error(error?.detail || \"Failed to fetch organization events\");\n  }\n\n  return response.json();\n}\n\n// Response type for my organizations endpoint\nexport interface MyOrganizationsResponse {\n  owned: Organization[];\n  collaborated: Organization[];\n}\n\n// Get organizations owned by current user and organizations where user is a collaborator (requires auth)\nexport async function getMyOrganizations(): Promise<MyOrganizationsResponse> {\n  const response = await fetchWithAuth(\n    `${API_BASE}/accounts/organizations/me/`,\n    {\n      method: \"GET\",\n    },\n  );\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error(error?.detail || \"Failed to fetch my organizations\");\n  }\n\n  return response.json();\n}\n\n// User search result interface\nexport interface UserSearchResult {\n  id: number;\n  username: string;\n  email: string;\n  first_name: string;\n  last_name: string;\n  role: string;\n}\n\n// Collaborator interface (same as UserSearchResult)\nexport type Collaborator = UserSearchResult;\n\n// Search users by username (for adding collaborators)\nexport async function searchUsers(query: string): Promise<UserSearchResult[]> {\n  if (query.length < 2) {\n    return [];\n  }\n\n  const response = await fetchWithAuth(\n    `${API_BASE}/accounts/organizations/search_users/?q=${encodeURIComponent(query)}`,\n    {\n      method: \"GET\",\n    },\n  );\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error(error?.detail || \"Failed to search users\");\n  }\n\n  return response.json();\n}\n\n// Get collaborators for an organization\nexport async function getCollaborators(\n  organizationId: number,\n): Promise<Collaborator[]> {\n  const response = await fetchWithAuth(\n    `${API_BASE}/accounts/organizations/${organizationId}/collaborators/`,\n    {\n      method: \"GET\",\n    },\n  );\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error(error?.detail || \"Failed to fetch collaborators\");\n  }\n\n  return response.json();\n}\n\n// Add a collaborator to an organization\nexport async function addCollaborator(\n  organizationId: number,\n  userId: number,\n): Promise<void> {\n  const response = await fetchWithAuth(\n    `${API_BASE}/accounts/organizations/${organizationId}/collaborators/${userId}/`,\n    {\n      method: \"POST\",\n    },\n  );\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error(error?.detail || \"Failed to add collaborator\");\n  }\n}\n\n// Remove a collaborator from an organization\nexport async function removeCollaborator(\n  organizationId: number,\n  userId: number,\n): Promise<void> {\n  const response = await fetchWithAuth(\n    `${API_BASE}/accounts/organizations/${organizationId}/collaborators/${userId}/`,\n    {\n      method: \"DELETE\",\n    },\n  );\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error(error?.detail || \"Failed to remove collaborator\");\n  }\n}\n\n// Follow an organization\nexport async function followOrganization(\n  organizationId: number,\n): Promise<void> {\n  const response = await fetchWithAuth(\n    `${API_BASE}/accounts/organizations/${organizationId}/follow/`,\n    {\n      method: \"POST\",\n    },\n  );\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error(error?.detail || \"Failed to follow organization\");\n  }\n}\n\n// Unfollow an organization\nexport async function unfollowOrganization(\n  organizationId: number,\n): Promise<void> {\n  const response = await fetchWithAuth(\n    `${API_BASE}/accounts/organizations/${organizationId}/follow/`,\n    {\n      method: \"DELETE\",\n    },\n  );\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error(error?.detail || \"Failed to unfollow organization\");\n  }\n}\n\n// Get all organizations the current user is following\nexport async function getFollowedOrganizations(): Promise<\n  PublicOrganization[]\n> {\n  const response = await fetchWithAuth(\n    `${API_BASE}/accounts/organizations/followed/`,\n    {\n      method: \"GET\",\n    },\n  );\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error(error?.detail || \"Failed to fetch followed organizations\");\n  }\n\n  return response.json();\n}\n","\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport {\n  followOrganization,\n  unfollowOrganization,\n  type PublicOrganization,\n} from \"@/lib/organizations\";\nimport { isAuthenticated } from \"@/lib/auth\";\nimport { getProfile } from \"@/lib/profiles\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\n\ninterface OrganizationCardProps {\n  organization: PublicOrganization;\n  referrer?: string;\n}\n\nconst getOrganizationTypeLabel = (type: string | null) => {\n  if (!type) return \"Not specified\";\n  const typeMap: Record<string, string> = {\n    COMPANY: \"Company\",\n    NON_PROFIT: \"Non-profit\",\n    COMMUNITY: \"Community\",\n    EDUCATIONAL: \"Educational\",\n    GOVERNMENT: \"Government\",\n    OTHER: \"Other\",\n  };\n  return typeMap[type] || type;\n};\n\nexport default function OrganizationCard({\n  organization,\n  referrer,\n}: OrganizationCardProps) {\n  const router = useRouter();\n  const [isFollowing, setIsFollowing] = useState(\n    organization.is_following || false,\n  );\n  const [followLoading, setFollowLoading] = useState(false);\n  const [userRole, setUserRole] = useState<string | null>(null);\n\n  useEffect(() => {\n    // Fetch user profile to check role\n    if (isAuthenticated()) {\n      getProfile()\n        .then((profile) => {\n          if (profile) {\n            setUserRole(profile.role);\n          }\n        })\n        .catch(() => {\n          // Silently fail\n        });\n    }\n  }, []);\n\n  // Update following state when organization prop changes\n  useEffect(() => {\n    setIsFollowing(organization.is_following || false);\n  }, [organization.id, organization.is_following]);\n\n  const handleFollowToggle = async (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    // Check if user is authenticated\n    if (!isAuthenticated()) {\n      sessionStorage.setItem(\"login_redirect\", window.location.pathname);\n      router.push(\"/profile/login\");\n      return;\n    }\n\n    try {\n      setFollowLoading(true);\n      if (isFollowing) {\n        await unfollowOrganization(organization.id);\n        setIsFollowing(false);\n      } else {\n        await followOrganization(organization.id);\n        setIsFollowing(true);\n      }\n    } catch (err) {\n      console.error(\"Failed to toggle follow:\", err);\n      alert(\n        err instanceof Error\n          ? err.message\n          : \"Failed to update follow status. Please try again.\",\n      );\n    } finally {\n      setFollowLoading(false);\n    }\n  };\n\n  const handleCardClick = () => {\n    if (referrer) {\n      sessionStorage.setItem(\"org_detail_referrer\", referrer);\n    }\n  };\n\n  return (\n    <Card className=\"hover:shadow-lg transition-shadow flex flex-col\">\n      <CardHeader>\n        <CardTitle className=\"line-clamp-2\">{organization.name}</CardTitle>\n        <CardDescription>\n          {getOrganizationTypeLabel(organization.organization_type)}\n          {organization.event_count > 0 && (\n            <span className=\"ml-2\">\n              ‚Ä¢ {organization.event_count} event\n              {organization.event_count !== 1 ? \"s\" : \"\"}\n            </span>\n          )}\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"flex-1\">\n        {organization.description && (\n          <p className=\"text-sm text-muted-foreground line-clamp-3 mb-2\">\n            {organization.description}\n          </p>\n        )}\n        {organization.city && organization.country && (\n          <p className=\"text-sm text-muted-foreground\">\n            üìç {organization.city}, {organization.country}\n          </p>\n        )}\n        {organization.owner_name && (\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            By {organization.owner_name}\n          </p>\n        )}\n      </CardContent>\n      <CardFooter className=\"flex flex-col gap-2\">\n        <Button variant=\"outline\" className=\"w-full\" asChild>\n          <Link\n            href={`/organizations/detail?id=${organization.id}`}\n            onClick={handleCardClick}\n          >\n            View Details\n          </Link>\n        </Button>\n        {userRole === \"ATTENDEE\" && (\n          <Button\n            variant={isFollowing ? \"outline\" : \"default\"}\n            size=\"sm\"\n            onClick={handleFollowToggle}\n            disabled={followLoading}\n            className=\"w-full group relative\"\n          >\n            <span className={isFollowing ? \"group-hover:hidden\" : \"\"}>\n              {followLoading\n                ? \"Loading...\"\n                : isFollowing\n                  ? \"Following\"\n                  : \"Follow\"}\n            </span>\n            {isFollowing && !followLoading && (\n              <span className=\"hidden group-hover:inline\">Unfollow</span>\n            )}\n          </Button>\n        )}\n      </CardFooter>\n    </Card>\n  );\n}\n","\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport {\n  listOrganizations,\n  type PublicOrganization,\n} from \"@/lib/organizations\";\nimport { isAuthenticated } from \"@/lib/auth\";\nimport { getProfile, type Profile } from \"@/lib/profiles\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport OrganizationCard from \"@/components/OrganizationCard\";\n\nexport default function OrganizationsPage() {\n  const [organizations, setOrganizations] = useState<PublicOrganization[]>([]);\n  const [profile, setProfile] = useState<Profile | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [mounted, setMounted] = useState(false);\n  const [isAuth, setIsAuth] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n    setIsAuth(isAuthenticated());\n  }, []);\n\n  useEffect(() => {\n    if (!mounted) return;\n\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        // Fetch organizations\n        const orgsData = await listOrganizations();\n        setOrganizations(orgsData);\n\n        // Fetch user profile to check role (only if authenticated)\n        if (isAuth) {\n          try {\n            const profileData = await getProfile();\n            setProfile(profileData);\n          } catch (err) {\n            // If profile fetch fails, just continue without showing create button\n            console.error(\"Failed to load profile:\", err);\n          }\n        }\n      } catch (err) {\n        setError(\n          err instanceof Error ? err.message : \"Failed to load organizations\",\n        );\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [mounted, isAuth]);\n\n  if (!mounted || loading) {\n    return (\n      <div className=\"container mx-auto p-8 max-w-7xl\">\n        <p>Loading organizations...</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"container mx-auto p-8 max-w-7xl\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Error</CardTitle>\n            <CardDescription>{error}</CardDescription>\n          </CardHeader>\n        </Card>\n      </div>\n    );\n  }\n\n  const isOrganizer = profile?.role === \"ORGANIZER\";\n\n  return (\n    <div className=\"container mx-auto p-8 max-w-7xl\">\n      <div className=\"mb-6 flex items-center justify-between\">\n        <h1 className=\"text-3xl font-bold\">Organizations</h1>\n        {isOrganizer && organizations.length > 0 && (\n          <Button asChild>\n            <Link href=\"/organizations/create\">Create Organization</Link>\n          </Button>\n        )}\n      </div>\n\n      {organizations.length === 0 ? (\n        <Card>\n          <CardContent className=\"py-12 text-center\">\n            <p className=\"text-muted-foreground\">\n              {isOrganizer\n                ? \"No organizations have been created yet. Create the first one to get started!\"\n                : \"No organizations are available at the moment. Check back later!\"}\n            </p>\n            {isOrganizer && (\n              <Button asChild className=\"mt-4\">\n                <Link href=\"/organizations/create\">Create Organization</Link>\n              </Button>\n            )}\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {organizations.map((org) => (\n            <OrganizationCard\n              key={org.id}\n              organization={org}\n              referrer=\"/organizations\"\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}