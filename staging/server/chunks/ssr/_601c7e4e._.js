module.exports=[77991,70106,a=>{"use strict";var b=a.i(72131);let c=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},d=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:c=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:c,height:c,stroke:a,strokeWidth:g?24*Number(f)/Number(c):f,className:d("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:d(`lucide-${c(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=c(a),g};a.s(["default",()=>g],70106);let h=g("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDownIcon",()=>h],77991)},27625,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(40695),f=a.i(5522),g=a.i(16474),h=a.i(3130),i=a.i(87682),j=a.i(47033),k=a.i(36099),l=a.i(60999),m=a.i(97895);let n=({children:a})=>(0,b.jsx)("span",{className:"text-sm font-medium text-green-600",children:a});function o(){let a=(0,d.useRouter)(),m=(0,d.useSearchParams)(),[o,p]=(0,c.useState)(!1),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)(!0),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)({name:"",date:"",location:"",description:"",capacity:"",category:""}),[D,E]=(0,c.useState)({}),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)("");(0,c.useEffect)(()=>{p(!0);let b=(0,j.isAuthenticated)();(s(b),b)?(async()=>{try{y(!0);let b=await (0,k.getProfile)();if(u(b),"ORGANIZER"!==b.role)return void a.replace("/");let c=await (0,l.getMyOrganizations)(),d=[...c.owned||[],...c.collaborated||[]];w(d);let e=m.get("organization");if(e){if(d.find(a=>a.id===Number(e))){A(e);let a=sessionStorage.getItem("org_detail_referrer");a?sessionStorage.setItem("org_create_event_referrer",a):sessionStorage.setItem("org_create_event_referrer",`/organizations/${e}`)}}else 1===d.length&&A(String(d[0].id))}catch(a){console.error("Failed to load data:",a),G("Failed to load data. Please make sure you are logged in.")}finally{y(!1)}})():a.replace("/profile/login")},[a,m]);let J=async b=>{let c,d;if(b.preventDefault(),c={},d=!1,(z||(c.organization="Organization is required",d=!0),Object.entries(B).forEach(([a,b])=>{"capacity"!==a&&("string"!=typeof b||b.trim()||(c[a]=`${a.charAt(0).toUpperCase()+a.slice(1)} is required`,d=!0))}),B.capacity&&0>Number(B.capacity)&&(c.capacity="Capacity cannot be negative",d=!0),E(c),d)?(G("Please fill in all required fields"),!1):(G(""),!0))try{let b={...B,capacity:""===B.capacity?0:Number(B.capacity),organization:Number(z)};if(await q(b),I("Event created successfully!"),C({name:"",date:"",location:"",description:"",capacity:"",category:""}),E({}),G(""),v.find(a=>a.id===Number(z))){let b=sessionStorage.getItem("org_create_event_referrer");b&&(sessionStorage.setItem("org_detail_referrer",b),sessionStorage.removeItem("org_create_event_referrer")),a.replace(`/organizations/${z}`)}}catch(a){G("Failed to create event"),console.error("Error creating event:",a),I("")}};return o&&r&&!x?t?.role!=="ORGANIZER"?(0,b.jsx)("div",{className:"container mx-auto p-8 max-w-4xl",children:(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"Access Denied"}),(0,b.jsx)(h.CardDescription,{children:"Only users with ORGANIZER role can create events."})]}),(0,b.jsx)(h.CardFooter,{children:(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>a.push("/"),children:"Back to Home"})})]})}):(0,b.jsxs)("div",{className:"container mx-auto p-8 max-w-4xl",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Create New Event"}),(0,b.jsxs)("form",{onSubmit:J,children:[(0,b.jsxs)(g.Field,{className:"mb-4",children:[(0,b.jsxs)(g.FieldLabel,{children:["Organization ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsxs)(g.FieldContent,{children:[(0,b.jsxs)(i.Select,{value:z,onValueChange:a=>{A(a),E({...D,organization:""}),G("")},children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{placeholder:"Select organization"})}),(0,b.jsx)(i.SelectContent,{children:v.map(a=>(0,b.jsx)(i.SelectItem,{value:String(a.id),children:a.name},a.id))})]}),D.organization&&(0,b.jsx)(g.FieldError,{children:D.organization})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[(0,b.jsxs)(g.Field,{children:[(0,b.jsx)(g.FieldLabel,{children:"Name"}),(0,b.jsx)(g.FieldContent,{children:(0,b.jsx)(f.Input,{type:"text",value:B.name,onChange:a=>{C({...B,name:a.target.value}),E({...D,name:""}),G(""),I("")}})}),D.name&&(0,b.jsx)(g.FieldError,{children:D.name})]}),(0,b.jsxs)(g.Field,{children:[(0,b.jsx)(g.FieldLabel,{children:"Date and Time"}),(0,b.jsx)(g.FieldContent,{children:(0,b.jsx)(f.Input,{type:"datetime-local",value:B.date,onChange:a=>{C({...B,date:a.target.value}),E({...D,date:""}),G(""),I("")}})}),D.date&&(0,b.jsx)(g.FieldError,{children:D.date})]}),(0,b.jsxs)(g.Field,{children:[(0,b.jsx)(g.FieldLabel,{children:"Location"}),(0,b.jsx)(g.FieldContent,{children:(0,b.jsx)(f.Input,{type:"text",value:B.location,onChange:a=>{C({...B,location:a.target.value}),E({...D,location:""}),G(""),I("")}})}),D.location&&(0,b.jsx)(g.FieldError,{children:D.location})]}),(0,b.jsxs)(g.Field,{children:[(0,b.jsx)(g.FieldLabel,{children:"Category"}),(0,b.jsx)(g.FieldContent,{children:(0,b.jsxs)(i.Select,{value:B.category,onValueChange:a=>{C({...B,category:a}),E({...D,category:""}),G(""),I("")},children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{placeholder:"Select a category"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"SOCIAL",children:"Social"}),(0,b.jsx)(i.SelectItem,{value:"ACADEMIC",children:"Academic"}),(0,b.jsx)(i.SelectItem,{value:"TRAVEL",children:"Travel"}),(0,b.jsx)(i.SelectItem,{value:"SPORTS",children:"Sports"}),(0,b.jsx)(i.SelectItem,{value:"CULTURAL",children:"Cultural"}),(0,b.jsx)(i.SelectItem,{value:"VOLUNTEERING",children:"Volunteering"}),(0,b.jsx)(i.SelectItem,{value:"NIGHTLIFE",children:"Nightlife"})]})]})}),D.category&&(0,b.jsx)(g.FieldError,{children:D.category})]}),(0,b.jsxs)(g.Field,{children:[(0,b.jsx)(g.FieldLabel,{children:"Maximum Capacity"}),(0,b.jsx)(g.FieldContent,{children:(0,b.jsx)(f.Input,{type:"number",placeholder:"Unlimited if blank",value:B.capacity,onChange:a=>{C({...B,capacity:a.target.value}),E({...D,capacity:""}),G(""),I("")}})}),D.capacity&&(0,b.jsx)(g.FieldError,{children:D.capacity})]}),(0,b.jsxs)(g.Field,{className:"md:col-span-2",children:[(0,b.jsx)(g.FieldLabel,{children:"Description"}),(0,b.jsx)(g.FieldContent,{children:(0,b.jsx)("textarea",{className:"w-full p-2 border rounded min-h-[100px]",value:B.description,onChange:a=>{C({...B,description:a.target.value}),E({...D,description:""}),G(""),I("")}})}),D.description&&(0,b.jsx)(g.FieldError,{children:D.description})]})]}),(0,b.jsx)(e.Button,{type:"submit",className:"mt-6",children:"Create Event"}),(0,b.jsxs)("div",{className:"mt-4",children:[F&&(0,b.jsx)(g.FieldError,{children:F}),H&&(0,b.jsx)(n,{children:H})]})]})]}):(0,b.jsx)("div",{className:"container mx-auto p-8 max-w-4xl",children:(0,b.jsx)("p",{children:"Loading..."})})}function p(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"container mx-auto p-6",children:"Loading..."}),children:(0,b.jsx)(o,{})})}let q=async a=>{let b=await (0,m.apiRequest)("events/create/","POST",a);if(!b.ok)throw Error("Failed to create event");return b.json()};a.s(["createEvent",0,q,"default",()=>p])}];

//# sourceMappingURL=_601c7e4e._.js.map