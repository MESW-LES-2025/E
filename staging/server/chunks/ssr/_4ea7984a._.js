module.exports=[77991,70106,a=>{"use strict";var b=a.i(72131);let c=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},d=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:c=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:c,height:c,stroke:a,strokeWidth:g?24*Number(f)/Number(c):f,className:d("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:d(`lucide-${c(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=c(a),g};a.s(["default",()=>g],70106);let h=g("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDownIcon",()=>h],77991)},69337,a=>{"use strict";var b=a.i(47033);let c="https://APimenta4.pythonanywhere.com/api";async function d(a){return(0,b.fetchWithAuth)(`${c}/events/${a}/cancel/`,{method:"POST"})}async function e(a){return(0,b.fetchWithAuth)(`${c}/events/${a}/uncancel/`,{method:"POST"})}async function f(){let a=await (0,b.fetchWithAuth)(`${c}/events/my-organized/`,{method:"GET"});if(!a.ok){let b=await a.json().catch(()=>({}));throw Error(b?.detail||"Failed to fetch organized events")}let d=await a.json();return d.results||d}async function g(a){let d=await (0,b.fetchWithAuth)(`${c}/events/${a}/participants/`,{method:"GET"});if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a?.detail||"Failed to fetch event participants")}let e=await d.json();return e.results||e}async function h(a){let d=await (0,b.fetchWithAuth)(`${c}/events/${a}/interested-users/`,{method:"GET"});if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a?.detail||"Failed to fetch interested users")}let e=await d.json();return e.results||e}async function i(a){let d=await (0,b.fetchWithAuth)(`${c}/events/${a}/interested/`,{method:"DELETE"});if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a?.detail||"Failed to unmark event as interested")}return d.json()}async function j(){let a=await (0,b.fetchWithAuth)(`${c}/events/interested/`,{method:"GET"});if(!a.ok){let b=await a.json().catch(()=>({}));throw Error(b?.detail||"Failed to fetch interested events")}let d=await a.json();return d.results||d}a.s(["cancelEventRequest",()=>d,"getEventInterestedUsers",()=>h,"getEventParticipants",()=>g,"getInterestedEvents",()=>j,"getMyOrganizedEvents",()=>f,"uncancelEventRequest",()=>e,"unmarkEventAsInterested",()=>i])},37913,a=>{"use strict";var b,c=a.i(87924),d=a.i(72131),e=a.i(30330),f=a.i(40695),g=a.i(97895),h=a.i(47033),i=a.i(50944),j=a.i(17199),k=a.i(14732),l=a.i(69337);let m="events";var n=((b=n||{}).ALL="",b.PARTICIPATING="Participating",b.INTERESTED="Interested",b.ORGANIZED="Organized",b);let o={"":{endpoint:m,style:"bg-green-400 text-primary-foreground rounded-lg"},Participating:{endpoint:`${m}/participating/`,style:"bg-lime-400 text-white rounded-lg"},Interested:{endpoint:`${m}/interested/`,style:"bg-emerald-400 text-white rounded-lg"},Organized:{endpoint:`${m}/organized/`,style:"bg-teal-400 text-white rounded-lg"}};function p(){let a=new Date,b=(0,i.useRouter)(),[m,n]=(0,d.useState)([]),[p,q]=(0,d.useState)(""),[r,s]=(0,d.useState)(!0),[t,u]=(0,d.useState)(a),[v,w]=(0,d.useState)(a),[x,y]=(0,d.useState)(null),[z,A]=(0,d.useState)(!1),[B,C]=(0,d.useState)(null);(0,d.useEffect)(()=>{(0,h.isAuthenticated)()?(0,h.fetchWithAuth)("https://APimenta4.pythonanywhere.com/api/auth/users/me/").then(a=>{if(!a.ok)throw Error(`Status ${a.status}`);return a.json()}).then(a=>{y(a)}).catch(()=>{}):b.push("/profile/login")},[b]);let D=(0,d.useCallback)(async a=>{s(!0);try{let b;if("Interested"===a)b=(await (0,l.getInterestedEvents)()).map(a=>({id:a.id,name:a.name,date:a.date,location:a.location||"",description:a.description||"",organizerId:String(a.organizer_name||""),registeredUsersIds:[],interestedUsersIds:[],category:a.category,participant_count:a.participant_count,interest_count:a.interest_count,is_participating:a.is_participating,is_interested:a.is_interested,is_full:a.is_full}));else if("Organized"===a)b=(await (0,l.getMyOrganizedEvents)()).map(a=>({id:a.id,name:a.name,date:a.date,location:a.location||"",description:a.description||"",organizerId:String(a.organizer_name||""),registeredUsersIds:[],interestedUsersIds:[],category:a.category,participant_count:a.participant_count,interest_count:a.interest_count,is_participating:a.is_participating,is_interested:a.is_interested,is_full:a.is_full}));else{let c=o[a].endpoint,d=await (0,g.apiRequest)(c);if(!d.ok)throw Error("Failed to fetch events");b=await d.json()}n(b)}catch(a){console.error(a),n([])}finally{s(!1)}},[]);(0,d.useEffect)(()=>{(0,h.isAuthenticated)()&&D(p)},[p,D]);let E=(0,d.useMemo)(()=>m.map(a=>new Date(a.date)),[m]),F=(0,d.useMemo)(()=>m.filter(a=>{let b=new Date(a.date);return v?.toDateString()===b.toDateString()}),[v,m]),G=(0,d.useMemo)(()=>({past:"opacity-50",event:o[p].style,today:"bg-blue-300 text-white rounded-lg",selected:"bg-primary text-primary-foreground rounded-lg"}),[p]),H=(0,d.useMemo)(()=>x?.role==="ORGANIZER"?[{type:"",label:"All Events",onClick:()=>q("")},{type:"Organized",label:"Organized",onClick:()=>q("Organized")}]:[{type:"",label:"All Events",onClick:()=>q("")},{type:"Participating",label:"Participating",onClick:()=>q("Participating")},{type:"Interested",label:"Interested",onClick:()=>q("Interested")}],[x]);return(0,c.jsxs)("div",{className:"flex flex-col lg:flex-row justify-center",children:[(0,c.jsxs)("div",{className:"flex-1 p-4 flex flex-col",children:[(0,c.jsx)("div",{className:"flex space-x-2 mb-4 justify-center",children:H.map(({type:a,label:b,onClick:d})=>(0,c.jsx)(f.Button,{variant:p===a?"default":"outline",onClick:d,children:b},a))}),(0,c.jsx)("div",{className:"flex justify-center",children:(0,c.jsx)(e.Calendar,{mode:"single",className:"rounded-lg border [--cell-size:--spacing(12)]",modifiers:{past:a=>a.getTime()<new Date().setHours(0,0,0,0),event:E},modifiersClassNames:{past:G.past,event:G.event,today:"bg-blue-300 text-white rounded-lg",selected:"bg-primary text-primary-foreground rounded-lg"},fixedWeeks:!0,onDayClick:a=>w(a),onMonthChange:a=>{u(a)},disabled:a=>r||a.getMonth()!==t.getMonth()||a.getFullYear()!==t.getFullYear()})})]}),(0,c.jsx)("div",{className:"flex-1 p-4",children:r?(0,c.jsx)("p",{className:"text-center text-gray-500",children:"Loading events..."}):0===F.length?(0,c.jsx)("p",{className:"text-center text-gray-500",children:v?`No ${p.toLowerCase()} events are planned for ${v.toLocaleDateString()}`:"No date selected"}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{className:"text-center text-gray-500 sticky mb-6.5 top-0 bg-gray-50",children:""===p?`All events planned for ${v?.toLocaleDateString()}:`:`${p} events planned for ${v?.toLocaleDateString()}:`}),(0,c.jsx)("div",{className:"flex flex-wrap justify-center gap-4 max-h-[calc(100vh-13.5rem)] overflow-y-auto",children:F.map(a=>(0,c.jsx)("div",{className:"w-full max-w-sm",children:(0,c.jsx)(k.default,{event:a,onViewDetails:a=>{C(a),A(!0)}})},a.id))})]})}),z&&(0,c.jsx)(j.default,{id:B,onClose:()=>{A(!1),C(null)},onInterestChange:(a,b,c)=>{n(d=>d.map(d=>d.id===a?{...d,interest_count:c,is_interested:b}:d))},onParticipationChange:(a,b,c,d)=>{n(e=>e.map(e=>e.id===a?{...e,participant_count:c,is_participating:b,is_full:d}:e))}})]})}a.s(["default",()=>p])}];

//# sourceMappingURL=_4ea7984a._.js.map