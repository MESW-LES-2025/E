module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f])},60999,a=>{"use strict";var b=a.i(47033);let c="https://APimenta4.pythonanywhere.com/api";async function d(){let a;try{a=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/`,{method:"GET"}),(401===a.status||403===a.status)&&(a=await fetch(`${c}/accounts/organizations/`))}catch{a=await fetch(`${c}/accounts/organizations/`)}if(!a.ok){let b=await a.json().catch(()=>({}));throw Error(b?.detail||"Failed to fetch organizations")}let d=await a.json();return Array.isArray(d)?d:d.results||[]}async function e(a){let d=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/${a}/`,{method:"GET"});if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a?.detail||"Failed to fetch organization")}return d.json()}async function f(a){let d=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/`,{method:"POST",body:JSON.stringify(a)});if(!d.ok){let a=await d.json().catch(()=>({}));if(403===d.status)throw Error(a?.detail||"You don't have permission to create organizations. Only users with ORGANIZER role can create organizations.");if(400===d.status&&a)throw a;throw Error(a?.detail||"Failed to create organization")}return d.json()}async function g(a,d){let e=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/${a}/`,{method:"PATCH",body:JSON.stringify(d)});if(!e.ok){let a=await e.json().catch(()=>({}));throw Error(a?.detail||"Failed to update organization")}return e.json()}async function h(a){let d=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/${a}/`,{method:"DELETE"});if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a?.detail||"Failed to delete organization")}}async function i(a){let d;try{d=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/${a}/events/`,{method:"GET"}),(401===d.status||403===d.status)&&(d=await fetch(`${c}/accounts/organizations/${a}/events/`))}catch{d=await fetch(`${c}/accounts/organizations/${a}/events/`)}if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a?.detail||"Failed to fetch organization events")}return d.json()}async function j(){let a=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/me/`,{method:"GET"});if(!a.ok){let b=await a.json().catch(()=>({}));throw Error(b?.detail||"Failed to fetch my organizations")}return a.json()}async function k(a){if(a.length<2)return[];let d=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/search_users/?q=${encodeURIComponent(a)}`,{method:"GET"});if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a?.detail||"Failed to search users")}return d.json()}async function l(a){let d=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/${a}/collaborators/`,{method:"GET"});if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a?.detail||"Failed to fetch collaborators")}return d.json()}async function m(a,d){let e=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/${a}/collaborators/${d}/`,{method:"POST"});if(!e.ok){let a=await e.json().catch(()=>({}));throw Error(a?.detail||"Failed to add collaborator")}}async function n(a,d){let e=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/${a}/collaborators/${d}/`,{method:"DELETE"});if(!e.ok){let a=await e.json().catch(()=>({}));throw Error(a?.detail||"Failed to remove collaborator")}}async function o(a){let d=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/${a}/follow/`,{method:"POST"});if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a?.detail||"Failed to follow organization")}}async function p(a){let d=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/${a}/follow/`,{method:"DELETE"});if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a?.detail||"Failed to unfollow organization")}}async function q(){let a=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/followed/`,{method:"GET"});if(!a.ok){let b=await a.json().catch(()=>({}));throw Error(b?.detail||"Failed to fetch followed organizations")}return a.json()}a.s(["addCollaborator",()=>m,"createOrganization",()=>f,"deleteOrganization",()=>h,"followOrganization",()=>o,"getCollaborators",()=>l,"getFollowedOrganizations",()=>q,"getMyOrganizations",()=>j,"getOrganization",()=>e,"getOrganizationEvents",()=>i,"listOrganizations",()=>d,"removeCollaborator",()=>n,"searchUsers",()=>k,"unfollowOrganization",()=>p,"updateOrganization",()=>g])},25331,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(47033),g=a.i(36099),h=a.i(60999),i=a.i(40695),j=a.i(3130);function k(){let a=(0,d.useRouter)(),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(null);if((0,c.useEffect)(()=>{l(!0);let b=(0,f.isAuthenticated)();(n(b),b)?(async()=>{try{v(!0),x(null);let b=await (0,g.getProfile)();if(p(b),"ORGANIZER"!==b.role)return void a.replace("/organizations");let c=await (0,h.getMyOrganizations)();r(c.owned||[]),t(c.collaborated||[])}catch(a){x(a instanceof Error?a.message:"Failed to load organizations")}finally{v(!1)}})():a.replace("/profile/login")},[a]),!k||!m||u)return(0,b.jsx)("div",{className:"container mx-auto p-8 max-w-7xl",children:(0,b.jsx)("p",{children:"Loading..."})});if(w)return(0,b.jsx)("div",{className:"container mx-auto p-8 max-w-7xl",children:(0,b.jsxs)(j.Card,{children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsx)(j.CardTitle,{children:"Error"}),(0,b.jsx)(j.CardDescription,{children:w})]}),(0,b.jsx)(j.CardFooter,{children:(0,b.jsx)(i.Button,{variant:"outline",onClick:()=>a.push("/organizations"),children:"Back to Organizations"})})]})});if(o?.role!=="ORGANIZER")return(0,b.jsx)("div",{className:"container mx-auto p-8 max-w-7xl",children:(0,b.jsxs)(j.Card,{children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsx)(j.CardTitle,{children:"Access Denied"}),(0,b.jsx)(j.CardDescription,{children:"Only users with ORGANIZER role can access this page."})]}),(0,b.jsx)(j.CardFooter,{children:(0,b.jsx)(i.Button,{variant:"outline",onClick:()=>a.push("/organizations"),children:"Browse Organizations"})})]})});let y=(a,c)=>(0,b.jsxs)(j.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsx)(j.CardTitle,{className:"line-clamp-2",children:a.name}),(0,b.jsxs)(j.CardDescription,{children:[a.event_count>0&&(0,b.jsxs)("span",{children:[a.event_count," event",1!==a.event_count?"s":""]}),!c&&(0,b.jsx)("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Collaborator"})]})]}),(0,b.jsxs)(j.CardContent,{children:[a.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-3 mb-2",children:a.description}),a.city&&a.country&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["ðŸ“ ",a.city,", ",a.country]})]}),(0,b.jsxs)(j.CardFooter,{className:"flex gap-2",children:[(0,b.jsx)(i.Button,{variant:"outline",className:"flex-1",asChild:!0,children:(0,b.jsx)(e.default,{href:`/organizations/detail?id=${a.id}`,onClick:()=>sessionStorage.setItem("org_detail_referrer","/organizations/my"),children:"View"})}),c&&(0,b.jsx)(i.Button,{variant:"outline",className:"flex-1",asChild:!0,children:(0,b.jsx)(e.default,{href:`/organizations/edit?id=${a.id}`,children:"Edit"})})]})]},a.id),z=q.length>0||s.length>0;return(0,b.jsxs)("div",{className:"container mx-auto p-8 max-w-7xl",children:[(0,b.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"My Organizations"}),(0,b.jsx)(i.Button,{asChild:!0,children:(0,b.jsx)(e.default,{href:"/organizations/create",children:"Create Organization"})})]}),z?(0,b.jsxs)(b.Fragment,{children:[q.length>0&&(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Organizations I Own"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map(a=>y(a,!0))})]}),s.length>0&&(0,b.jsxs)("div",{className:q.length>0?"mt-8":"",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Organizations I Collaborate With"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(a=>y(a,!1))})]})]}):(0,b.jsx)(j.Card,{children:(0,b.jsxs)(j.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"You don't have any organizations yet."}),(0,b.jsx)(i.Button,{asChild:!0,children:(0,b.jsx)(e.default,{href:"/organizations/create",children:"Create Your First Organization"})})]})})]})}a.s(["default",()=>k])}];

//# sourceMappingURL=_5b572ef9._.js.map