module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f])},60999,a=>{"use strict";var b=a.i(47033);let c="https://APimenta4.pythonanywhere.com/api";async function d(){let a;try{a=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/`,{method:"GET"}),(401===a.status||403===a.status)&&(a=await fetch(`${c}/accounts/organizations/`))}catch{a=await fetch(`${c}/accounts/organizations/`)}if(!a.ok){let b=await a.json().catch(()=>({}));throw Error(b?.detail||"Failed to fetch organizations")}let d=await a.json();return Array.isArray(d)?d:d.results||[]}async function e(a){let d=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/${a}/`,{method:"GET"});if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a?.detail||"Failed to fetch organization")}return d.json()}async function f(a){let d=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/`,{method:"POST",body:JSON.stringify(a)});if(!d.ok){let a=await d.json().catch(()=>({}));if(403===d.status)throw Error(a?.detail||"You don't have permission to create organizations. Only users with ORGANIZER role can create organizations.");if(400===d.status&&a)throw a;throw Error(a?.detail||"Failed to create organization")}return d.json()}async function g(a,d){let e=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/${a}/`,{method:"PATCH",body:JSON.stringify(d)});if(!e.ok){let a=await e.json().catch(()=>({}));throw Error(a?.detail||"Failed to update organization")}return e.json()}async function h(a){let d=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/${a}/`,{method:"DELETE"});if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a?.detail||"Failed to delete organization")}}async function i(a){let d;try{d=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/${a}/events/`,{method:"GET"}),(401===d.status||403===d.status)&&(d=await fetch(`${c}/accounts/organizations/${a}/events/`))}catch{d=await fetch(`${c}/accounts/organizations/${a}/events/`)}if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a?.detail||"Failed to fetch organization events")}return d.json()}async function j(){let a=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/me/`,{method:"GET"});if(!a.ok){let b=await a.json().catch(()=>({}));throw Error(b?.detail||"Failed to fetch my organizations")}return a.json()}async function k(a){if(a.length<2)return[];let d=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/search_users/?q=${encodeURIComponent(a)}`,{method:"GET"});if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a?.detail||"Failed to search users")}return d.json()}async function l(a){let d=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/${a}/collaborators/`,{method:"GET"});if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a?.detail||"Failed to fetch collaborators")}return d.json()}async function m(a,d){let e=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/${a}/collaborators/${d}/`,{method:"POST"});if(!e.ok){let a=await e.json().catch(()=>({}));throw Error(a?.detail||"Failed to add collaborator")}}async function n(a,d){let e=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/${a}/collaborators/${d}/`,{method:"DELETE"});if(!e.ok){let a=await e.json().catch(()=>({}));throw Error(a?.detail||"Failed to remove collaborator")}}async function o(a){let d=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/${a}/follow/`,{method:"POST"});if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a?.detail||"Failed to follow organization")}}async function p(a){let d=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/${a}/follow/`,{method:"DELETE"});if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a?.detail||"Failed to unfollow organization")}}async function q(){let a=await (0,b.fetchWithAuth)(`${c}/accounts/organizations/followed/`,{method:"GET"});if(!a.ok){let b=await a.json().catch(()=>({}));throw Error(b?.detail||"Failed to fetch followed organizations")}return a.json()}a.s(["addCollaborator",()=>m,"createOrganization",()=>f,"deleteOrganization",()=>h,"followOrganization",()=>o,"getCollaborators",()=>l,"getFollowedOrganizations",()=>q,"getMyOrganizations",()=>j,"getOrganization",()=>e,"getOrganizationEvents",()=>i,"listOrganizations",()=>d,"removeCollaborator",()=>n,"searchUsers",()=>k,"unfollowOrganization",()=>p,"updateOrganization",()=>g])},72026,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(60999),g=a.i(47033),h=a.i(36099),i=a.i(40695),j=a.i(3130);function k({organization:a,referrer:k}){var l;let m=(0,e.useRouter)(),[n,o]=(0,c.useState)(a.is_following||!1),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null);(0,c.useEffect)(()=>{(0,g.isAuthenticated)()&&(0,h.getProfile)().then(a=>{a&&s(a.role)}).catch(()=>{})},[]),(0,c.useEffect)(()=>{o(a.is_following||!1)},[a.id,a.is_following]);let t=async b=>{if(b.preventDefault(),b.stopPropagation(),!(0,g.isAuthenticated)()){sessionStorage.setItem("login_redirect",window.location.pathname),m.push("/profile/login");return}try{q(!0),n?(await (0,f.unfollowOrganization)(a.id),o(!1)):(await (0,f.followOrganization)(a.id),o(!0))}catch(a){console.error("Failed to toggle follow:",a),alert(a instanceof Error?a.message:"Failed to update follow status. Please try again.")}finally{q(!1)}};return(0,b.jsxs)(j.Card,{className:"hover:shadow-lg transition-shadow flex flex-col",children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsx)(j.CardTitle,{className:"line-clamp-2",children:a.name}),(0,b.jsxs)(j.CardDescription,{children:[(l=a.organization_type)?({COMPANY:"Company",NON_PROFIT:"Non-profit",COMMUNITY:"Community",EDUCATIONAL:"Educational",GOVERNMENT:"Government",OTHER:"Other"})[l]||l:"Not specified",a.event_count>0&&(0,b.jsxs)("span",{className:"ml-2",children:["â€¢ ",a.event_count," event",1!==a.event_count?"s":""]})]})]}),(0,b.jsxs)(j.CardContent,{className:"flex-1",children:[a.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-3 mb-2",children:a.description}),a.city&&a.country&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["ðŸ“ ",a.city,", ",a.country]}),a.owner_name&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["By ",a.owner_name]})]}),(0,b.jsxs)(j.CardFooter,{className:"flex flex-col gap-2",children:[(0,b.jsx)(i.Button,{variant:"outline",className:"w-full",asChild:!0,children:(0,b.jsx)(d.default,{href:`/organizations/detail?id=${a.id}`,onClick:()=>{k&&sessionStorage.setItem("org_detail_referrer",k)},children:"View Details"})}),"ATTENDEE"===r&&(0,b.jsxs)(i.Button,{variant:n?"outline":"default",size:"sm",onClick:t,disabled:p,className:"w-full group relative",children:[(0,b.jsx)("span",{className:n?"group-hover:hidden":"",children:p?"Loading...":n?"Following":"Follow"}),n&&!p&&(0,b.jsx)("span",{className:"hidden group-hover:inline",children:"Unfollow"})]})]})]})}a.s(["default",()=>k])},54990,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(60999),f=a.i(47033),g=a.i(36099),h=a.i(40695),i=a.i(3130),j=a.i(72026);function k(){let[a,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1);if((0,c.useEffect)(()=>{s(!0),u((0,f.isAuthenticated)())},[]),(0,c.useEffect)(()=>{r&&(async()=>{try{o(!0),q(null);let a=await (0,e.listOrganizations)();if(k(a),t)try{let a=await (0,g.getProfile)();m(a)}catch(a){console.error("Failed to load profile:",a)}}catch(a){q(a instanceof Error?a.message:"Failed to load organizations")}finally{o(!1)}})()},[r,t]),!r||n)return(0,b.jsx)("div",{className:"container mx-auto p-8 max-w-7xl",children:(0,b.jsx)("p",{children:"Loading organizations..."})});if(p)return(0,b.jsx)("div",{className:"container mx-auto p-8 max-w-7xl",children:(0,b.jsx)(i.Card,{children:(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{children:"Error"}),(0,b.jsx)(i.CardDescription,{children:p})]})})});let v=l?.role==="ORGANIZER";return(0,b.jsxs)("div",{className:"container mx-auto p-8 max-w-7xl",children:[(0,b.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Organizations"}),v&&a.length>0&&(0,b.jsx)(h.Button,{asChild:!0,children:(0,b.jsx)(d.default,{href:"/organizations/create",children:"Create Organization"})})]}),0===a.length?(0,b.jsx)(i.Card,{children:(0,b.jsxs)(i.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:v?"No organizations have been created yet. Create the first one to get started!":"No organizations are available at the moment. Check back later!"}),v&&(0,b.jsx)(h.Button,{asChild:!0,className:"mt-4",children:(0,b.jsx)(d.default,{href:"/organizations/create",children:"Create Organization"})})]})}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(a=>(0,b.jsx)(j.default,{organization:a,referrer:"/organizations"},a.id))})]})}a.s(["default",()=>k])}];

//# sourceMappingURL=_95ec257e._.js.map