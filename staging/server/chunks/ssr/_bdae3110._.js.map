{"version":3,"sources":["turbopack:///[project]/components/ui/card.tsx","turbopack:///[project]/app/notifications/page.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n};\n","\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport {\n  listNotifications,\n  markAllAsRead,\n  markAsRead,\n  markAsUnread,\n  NotificationItem,\n} from \"@/lib/notifications\";\nimport { useEffect, useState } from \"react\";\n\nexport default function NotificationsPage() {\n  const [items, setItems] = useState<NotificationItem[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const load = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const data = await listNotifications();\n      setItems(data);\n    } catch (e) {\n      console.error(e);\n      setError(\"Failed to load notifications\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    load();\n  }, []);\n\n  const toggleRead = async (id: number, nextRead: boolean) => {\n    try {\n      setSaving(true);\n      if (nextRead) {\n        await markAsRead(id);\n      } else {\n        await markAsUnread(id);\n      }\n      setItems((prev) =>\n        prev.map((n) => (n.id === id ? { ...n, is_read: nextRead } : n)),\n      );\n    } catch (e) {\n      console.error(e);\n      setError(\"Failed to update notification\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const onMarkAll = async () => {\n    try {\n      setSaving(true);\n      await markAllAsRead();\n      setItems((prev) => prev.map((n) => ({ ...n, is_read: true })));\n    } catch (e) {\n      console.error(e);\n      setError(\"Failed to mark all as read\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const unreadCount = items.filter((n) => !n.is_read).length;\n\n  return (\n    <div className=\"container mx-auto p-8 max-w-3xl\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <h1 className=\"text-3xl font-bold\">Notifications</h1>\n        <Button\n          variant=\"outline\"\n          disabled={saving || unreadCount === 0}\n          onClick={onMarkAll}\n        >\n          Mark all as read\n        </Button>\n      </div>\n\n      {loading ? (\n        <Card>\n          <CardContent className=\"py-8 text-center\">Loading...</CardContent>\n        </Card>\n      ) : error ? (\n        <Card>\n          <CardContent className=\"py-8 text-center text-red-600\">\n            {error}\n          </CardContent>\n        </Card>\n      ) : items.length === 0 ? (\n        <p className=\"text-muted-foreground\">No notifications.</p>\n      ) : (\n        <ul className=\"space-y-3\">\n          {items.map((n) => (\n            <li\n              key={n.id}\n              className={`border rounded p-4 flex items-start gap-3 ${\n                n.is_read ? \"bg-white\" : \"bg-yellow-50\"\n              }`}\n            >\n              <input\n                type=\"checkbox\"\n                className=\"mt-1 h-4 w-4\"\n                checked={n.is_read}\n                onChange={(e) => toggleRead(n.id, e.target.checked)}\n                aria-label={n.is_read ? \"Mark as unread\" : \"Mark as read\"}\n                disabled={saving}\n              />\n              <div className=\"flex-1\">\n                <div className=\"flex justify-between\">\n                  <h2\n                    className={`font-semibold ${n.is_read ? \"\" : \"text-yellow-900\"}`}\n                  >\n                    {n.title}\n                  </h2>\n                  <span className=\"text-xs text-muted-foreground\">\n                    {new Date(n.created_at).toLocaleString()}\n                  </span>\n                </div>\n                {n.message && <p className=\"mt-2 text-sm\">{n.message}</p>}\n                <div className=\"mt-2\">\n                  {n.is_read ? (\n                    <Button\n                      size=\"sm\"\n                      variant=\"secondary\"\n                      onClick={() => toggleRead(n.id, false)}\n                      disabled={saving}\n                    >\n                      Mark as unread\n                    </Button>\n                  ) : (\n                    <Button\n                      size=\"sm\"\n                      onClick={() => toggleRead(n.id, true)}\n                      disabled={saving}\n                    >\n                      Mark as read\n                    </Button>\n                  )}\n                </div>\n              </div>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}